{"version":3,"sources":["gutenberg_blocks/locationlist/locationlist-render.js"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","cdm_core","fn","docReady","build_locationlist","document","querySelector","Collapsible","components","sorted_by_state","locationlist_data","locations","forEach","loc","address","country","state","concat","items","country_key","keys","sort","reverse","map","state_key","React","createElement","Loc","phone","email","push","title","react","render","List","google","maps","initMap","Map","getElementById","center","lat","lng","zoom","mapTypeId","disableDefaultUI","mapTypeControlOptions","mapTypeIds","MapTypeId","ROADMAP","mapTypes","set","StyledMapType","GOOGLEMAP_CONFIG","style","bounds","LatLngBounds","markers","extend","LatLng","Marker","position","infowindow","InfoWindow","content","marker","addListener","panTo","getPosition","setZoom","close","open","getContent","props","Fragment","fragment","Conditional","condition","className","target","href","encodeURI","lang","split","filter","x","includes","join"],"mappings":"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","file":"../../../gutenberg_blocks/locationlist/locationlist-render.min.js","sourcesContent":["\ncdm_core.fn.docReady(()=>build_locationlist())\n\nconst build_locationlist = () => {\n    if(document.querySelector('.wp-block-exm-locationlist .locations')){\n        const {Collapsible} = cdm_core.components;\n        let sorted_by_state = {};\n        locationlist_data.locations.forEach(loc => {\n            if(!sorted_by_state[loc.address.country]){\n                sorted_by_state[loc.address.country]={};\n            }\n            if(!sorted_by_state[loc.address.country][loc.address.state]){\n                sorted_by_state[loc.address.country][loc.address.state] = [loc]\n            }else{\n                sorted_by_state[loc.address.country][loc.address.state] = [...sorted_by_state[loc.address.country][loc.address.state],loc]\n            }\n        });\n\n        const items = [];\n        ['Canada','United States','China'].forEach(country_key => {\n            var arr = country_key != 'United States'?Object.keys(sorted_by_state[country_key]).sort().reverse():Object.keys(sorted_by_state[country_key]);\n            arr.map( state_key => {\n                let locations = sorted_by_state[country_key][state_key].map(loc => <Loc address={loc.address.address} phone={loc.phone} email={loc.email} />);\n                items.push(<Collapsible title={country_key == 'China'?country_key:state_key+', '+country_key } >{locations}</Collapsible>)\n            })\n        })\n        delete sorted_by_state['Canada'];\n        delete sorted_by_state['United States'];\n        delete sorted_by_state['China'];\n\n        Object.keys(sorted_by_state).forEach(country_key => {\n            Object.keys(sorted_by_state[country_key]).map( state_key => {\n                let locations = sorted_by_state[country_key][state_key].map(loc => <Loc address={loc.address.address} phone={loc.phone} email={loc.email} />);\n                items.push(<Collapsible title={state_key+', '+country_key } >{locations}</Collapsible>)\n            })\n        })\n\n        cdm_core.react.render(<List items={items} />,document.querySelector('.wp-block-exm-locationlist .locations'));\n\n        if (typeof google === 'object' && typeof google.maps === 'object') {\n            initMap()\n        }\n\n    }\n}\n\n\nconst initMap = ()=>{\n    map = new google.maps.Map(document.getElementById(\"contactmap\"), {\n        center: { lat: 28.564421989707274, lng: 0.8286596820654424 },\n        zoom: 2,\n        mapTypeId: 'custom_style',\n        disableDefaultUI: true,\n        mapTypeControlOptions: { mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'custom_style'] },\n    });      \n    \n    map.mapTypes.set(\n        'custom_style', \n        new google.maps.StyledMapType(GOOGLEMAP_CONFIG.style, {name: 'Custom Style'})\n    );\n\n    const bounds = new google.maps.LatLngBounds();\n    map.markers = locationlist_data.locations.map(loc => {\n        if(loc.address !== false && loc.address !== null){\n            bounds.extend(new google.maps.LatLng(loc.address.lat, loc.address.lng));\n\n            return new google.maps.Marker({\n                position: new google.maps.LatLng(loc.address.lat, loc.address.lng),\n                map,\n                loc:loc,\n                infowindow: new google.maps.InfoWindow({content:document.createElement('div')}),\n                title: loc.address.address\n            }); \n        }\n    });// A marker\n    // map.fitBounds(bounds,50); \n\n    map.markers.forEach(marker => {\n        marker.addListener('click',()=>{\n            //map.setZoom(12)\n            map.panTo(marker.getPosition())\n            map.setZoom(12)\n            map.markers.forEach(marker => {marker.infowindow.close()})\n            marker.infowindow.open(map, marker);\n            cdm_core.react.render(<Loc address={marker.loc.address.address} phone={marker.loc.phone}   email={marker.loc.email} />,marker.infowindow.getContent())\n\n        })\n    })\n\n    \n\n} \n\n\n\n\n\n\nconst List = (props) => {\n    const Fragment = cdm_core.react.fragment\n    return  <Fragment>\n                {props.items}\n            </Fragment>;\n};\n\n\n\n\nconst Loc = (props) => {\n    const {Conditional} = cdm_core.components\n    return  <Conditional condition={(props.address !== null && props.address !== false)} >\n                <div>\n                    <p className=\"address-link\">\n\n                        <span>{props.address}</span>\n                        <a target=\"_blank\" href={'https://www.google.com/maps/search/?api=1&query=' + encodeURI(props.address)}>\n                            {locationlist_data.lang.open}\n                            <i className=\"far fa-external-link\"></i>\n                        </a>\n                    </p>\n                    <p className=\"contacts\">\n                        <Conditional condition={(props.phone !== '')} >\n                            <a href={'tel:'+props.phone.split('').filter(x=>!['-',' ','(',')'].includes(x)).join('')}>{props.phone}</a>\n                        </Conditional>\n                        \n                        <br/>\n                        <Conditional condition={(props.email !== '')} >\n                            <a href={'mailto:'+props.email} >{props.email}</a>\n                        </Conditional>\n                        \n                    </p>\n                </div>\n            </Conditional>\n}\n\n\n\n\n\n"]}