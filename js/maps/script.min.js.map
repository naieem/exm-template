{"version":3,"sources":["script.js"],"names":["validateEmail","email","test","$","document","ready","Rellax","on","e","preventDefault","formatColor","state","color","element","attr","text","each","this","selectWoo","fn","amd","define","Utils","SingleSelection","adapter","prototype","update","data","length","selection","$rendered","$selection","find","formatted","display","empty","append","prop","title","clear","width","minimumResultsForSearch","templateSelection","templateResult","selectionAdapter","require","allowHtml","init_selectwoo_custom","next","toggleClass","parent","addClass","stopPropagation","ajax_filter_products","keyCode","click","hasClass","removeClass","val","removeTag","_this","Object","keys","theme_client_data","search_post","forEach","str","includes","trigger","name","addTags","$datalist","value","label","traductions","select_size","id","el","link","push","html","i","remove","x","concat","select2","size","conversions","in","mm","rate","modifier","toFixed","dimensionfilterSize","in_array","size_string","innerHTML","size_array","split","parseFloat","isNaN","switch_size_dimension_select","init_sidebar_filters_woocommerce","hide","css","stock_el","replaceWith","clone","watch_and_mimic_product_stock_variation","$bouton","action","ID","replace","valid_fav","post","ajax_url","res","displayQuickMessage","phpData","translate","need_connect","submit","messageLog","email_processing","ajax","JSON","stringify","success","message","email_invalid","toggle","country","iframe","Vimeo","Player","rect","getBoundingClientRect","top","left","bottom","window","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","player","setMuted","play","playvideo","ArrayAdapter","CustomDataAdapter","$element","options","__super__","constructor","call","Extend","updateOptions","addOptions","convertToOptions","slug","string","type","arguments","undefined","latestRequest","show","catIDs","elem","classList","className","indexOf","attributes","url_filters","generalVars","URL","attributeName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","searchParams","Symbol","iterator","done","key","err","return","termSlugs","queryType","get","found","history","replaceState","map","param","encodeURIComponent","join","status","jqXHR","count","total","jQuery"],"mappings":"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","file":"../script.min.js","sourcesContent":["// validation\r\nfunction validateEmail(email) { \r\n\tvar re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/; // TODO: ne pas accepter un IP \r\n\treturn re.test(email);\r\n}\r\n\r\n(function($){\r\n\r\n\t$(document).ready(init_script)\r\n\r\n\t$.fn.select2.amd.define('select2/data/customAdapter',\r\n\t\t['select2/data/array', 'select2/utils'],\r\n\t\tfunction (ArrayAdapter, Utils) {\r\n\t\t\tfunction CustomDataAdapter ($element, options) {\r\n\t\t\t\tCustomDataAdapter.__super__.constructor.call(this, $element, options);\r\n\t\t\t}\r\n\t\t\tUtils.Extend(CustomDataAdapter, ArrayAdapter);\r\n\t\t\tCustomDataAdapter.prototype.updateOptions = function (data) {\r\n\t\t\t\tthis.$element.find('option').remove(); // remove all options\r\n\t\t\t\tthis.addOptions(this.convertToOptions(data));\r\n\t\t\t}        \r\n\t\t\treturn CustomDataAdapter;\r\n\t\t}\r\n\t);\r\n\r\n\tfunction init_script(){\r\n\t\tvar rellax = new Rellax('.rellax');\r\n\t\t$('a[href=\"#\"]').on('click',e=>e.preventDefault()); // General setup\r\n\t\tinit_selectwoo_custom();\r\n\t\t// init_custom_addon_woocommerce();\r\n\t\tinit_sidebar_filters_woocommerce();\r\n\t\twatch_and_mimic_product_stock_variation();\r\n\t\tinit_save_for_later();\r\n\t\tinit_subscribe_to_newsletter();\r\n\t\tsingle_product_js();\r\n\t\tinit_currencySelector();\r\n\t\tinit_vimeo_playvideo()\r\n\t\t\r\n\t}\r\n\r\n\tfunction init_vimeo_playvideo(){\r\n\t\t$('iframe').each(function(){\r\n\t\t\tvar iframe = $(this)[0];\r\n\t\t\tvar player = new Vimeo.Player(iframe);\r\n\t\t\t$(document).on('scroll',function(){\r\n\t\t\t\tif(isInViewport(iframe)){\r\n\t\t\t\t\tplayvideo(iframe)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\tfunction playvideo(iframe){\r\n\t\tif(!$(iframe).hasClass('hasPlayed')){\r\n\t\t\tvar player = new Vimeo.Player(iframe);\r\n\t\t\tplayer.setMuted(true)\r\n\t\t\tplayer.play();\r\n\t\t\t$(iframe).addClass('hasPlayed')\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\tfunction isInViewport(el) {\r\n\t\tconst rect = el.getBoundingClientRect();\r\n\t\treturn (\r\n\t\t\trect.top >= 0 &&\r\n\t\t\trect.left >= 0 &&\r\n\t\t\trect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n\t\t\trect.right <= (window.innerWidth || document.documentElement.clientWidth)\r\n\t\r\n\t\t);\r\n\t}\r\n\t/**\r\n\t * All events and actions concerning the filter sidebar on product list page\r\n\t * AB\r\n\t */\r\n\tfunction init_sidebar_filters_woocommerce(){\r\n\t\t//gère les section developables\r\n\t\t$('.woocommerce-widget-layered-nav h4,#secondary .widget ul li.is_parent_term > a, .woocommerce aside h3').on('click',function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\t$(this).next().toggleClass('open');\r\n\t\t\t$(this).toggleClass('open');\r\n\t\t});\r\n\t\t//click on child parent\r\n\t\t$('.woocommerce-widget-layered-nav-list__item a').on('click',function(){\r\n\t\t\t$(this).parent().parent().addClass('open');\r\n\t\t\t$(this).parent().parent().parent().find('.widget-title,a').addClass('open');\r\n\t\t});\r\n\t\t// Permet de cliquer sur les liens de doc supplémentaire dans les titre de sections\r\n\t\t$('.woocommerce-widget-layered-nav h4 a').on('click',function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\t\r\n\r\n\t\t$('#search + button').on('click',function(e){\r\n\t\t\tajax_filter_products();\r\n\t\t});\r\n\t\t\r\n\t\t$('#search').on('keyup',function(e){\r\n\t\t\tif(e.keyCode == '13') {\r\n\t\t\t\tajax_filter_products();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif($('#secondary').length){\r\n\t\t\t$('#secondary .widget ul li:not(.is_parent_term) > a').click(function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\r\n\t\t\t\tvar parent = $(this).parent();\r\n\t\r\n\t\t\t\tif(parent.hasClass('chosen')){\r\n\t\t\t\t\tparent.removeClass('chosen');\r\n\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tparent.addClass('chosen');\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tajax_filter_products();\r\n\t\t\t});\r\n\t\r\n\t\t\t$('#secondary .reset-filters').click(function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$('#search').val('')\r\n\t\t\t\t$(this).parent().parent().find('.chosen').removeClass('chosen');\r\n\t\t\t\tajax_filter_products();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif($('.loadmore').length){\r\n\t\t\t$('.loadmore').click(function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tajax_filter_products(true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$('body').on('click','span [data-close]',removeTag);\r\n\r\n\r\n\t\t/**\r\n\t\t * auto click from gat param sanitized in php\r\n\t\t */\r\n\t\t$('.woocommerce-widget-layered-nav-list__item a').each(function(){\r\n\t\t\tObject.keys(theme_client_data.search_post).forEach(str => {\r\n\t\t\t\tif($(this).attr('href').includes('='+str)){\r\n\t\t\t\t\t$(this).trigger('click');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tif(theme_client_data.search_post.name){\r\n\t\t\taddTags(theme_client_data.search_post.name,'name')\r\n\t\t}\r\n\r\n\t\trefillSelectFromDimensions();\r\n\t\t$('#dimensionfilter').select2()\r\n\t\t$('#dimensionfilter').on(\"change\",function(){\r\n\t\t\t$('#dimensionfilter').parent().parent().find('ul li.wc-layered-nav-term a[href=\"'+$('#dimensionfilter').val()+'\"]').click();\r\n\t\t})\r\n\t\t$('.dimension-filter-select [data-size]').on('click',function(){\r\n\t\t\t$('.dimension-filter-select [data-size]').removeClass('selected')\r\n\t\t\t$(this).addClass('selected');\r\n\t\t\tvar size = $(this).data('size');\r\n\r\n\t\t\tswitch_size_dimension_select(size);\r\n\t\t});\r\n\r\n\t}//init_sidebar_filters_woocommerce\r\n\r\n\tvar dimensionfilterSize = 'in';\r\n\tfunction switch_size_dimension_select(size){\r\n\t\tvar conversions= {\r\n\t\t\tin:{\r\n\t\t\t\tmm:{ rate:25.4, modifier:(x)=> x.toFixed(0)}\r\n\t\t\t},\r\n\t\t\tmm:{\r\n\t\t\t\tin:{ rate:0.0393701, modifier:(x)=> x.toFixed(0)}\r\n\t\t\t}\r\n\t\t};\r\n\t\tif(dimensionfilterSize == size){ return; }\r\n\t\tif(!in_array(size,Object.keys(conversions))){ return; }\r\n\t\t\r\n\t\t$('#dimensionfilter option').each(function(i,el){\r\n\t\t\tif($(el).val() != ''){\r\n\t\t\t\tlet size_string = el.innerHTML;\r\n\t\t\t\tlet size_array = size_string.split('x');\r\n\t\t\t\tfor(let i = 0 ; i < size_array.length ; i++){\r\n\t\t\t\t\tsize_array[i] = parseFloat(size_array[i]) * conversions[dimensionfilterSize][size].rate;\r\n\t\t\t\t\tif(conversions[dimensionfilterSize][size].modifier){\r\n\t\t\t\t\t\tsize_array[i] = conversions[dimensionfilterSize][size].modifier(size_array[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsize_array[i] = isNaN(size_array[i])?'':size_array[i];\r\n\t\t\t\t}\r\n\t\t\t\tsize_string = size_array[0]+' x '+size_array[1]+' x '+size_array[2];\r\n\t\t\t\tel.innerHTML = size_string;\r\n\t\t\t}\r\n\t\t});      \r\n\t\tdimensionfilterSize = size;\r\n\t\t$('#dimensionfilter').select2()\r\n\t}\r\n \r\n\tfunction refillSelectFromDimensions(){\r\n\t\t$datalist = [{value:\"\",label:theme_client_data.traductions.select_size}];\r\n\t\t$('#dimensionfilter').parent().parent().find('ul.woocommerce-widget-layered-nav-list').addClass('hide')\r\n\t\t$('#dimensionfilter').parent().parent().find('ul li.wc-layered-nav-term').each(function(id,el){\r\n\t\t\tvar link = $(el).find('a');\r\n\t\t\t$datalist.push({\r\n\t\t\t\tvalue:link.attr('href'),\r\n\t\t\t\tlabel:link.html()\r\n\t\t\t})\r\n\t\t})\r\n\t\t$('#dimensionfilter').find('option').each(function(i,el){\r\n\t\t\t$(el).remove();\r\n\t\t});\r\n\t\t$datalist.forEach(function(x){\r\n\t\t\t$('#dimensionfilter').append($(`<option value=\"${x.value}\" >${x.label}</option>`))\r\n\t\t})\r\n\t}\r\n\r\n\tfunction removeTag(){\r\n\t\tvar type = $(this).parent().data('type');\r\n\t\tif(type === 'name'){\r\n\t\t\t$('#search').val('')\r\n\t\t}else{\r\n\t\t\tvar slug = $(this).attr('data-close');\r\n\t\t\t$('li.chosen > a[data-slug=\"'+slug+'\"]').parent().removeClass('chosen');\r\n\t\t}\r\n\t\tajax_filter_products();\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\tfunction addTags(string,type = 'attribute'){\r\n\t\t$('.filters-Tag').append($(`<span data-type=\"${type}\" > ${string.replace('-fr','').replace('-2','')} <i  data-close=\"${string}\" class=\"fal fa-times\"></i> </span>`));\r\n\t}\r\n\r\n\t// /**\r\n\t//  * Gère les event pour le changement de prix des produits variables\r\n\t//  * AB\r\n\t//  */\r\n\t// function init_custom_addon_woocommerce(){\r\n\t// \t/**\r\n\t// \t * Quand le form vérifie sa variation, on injecte les addon dans un data-attr, ils seront envoyés dans la requête Ajax\r\n\t// \t * AB\r\n\t// \t */\r\n\t// \t$('.variations_form').on('check_variations',function(){\r\n\t// \t\tlet custom_data={};\r\n\t// \t\t$('[data-addon_name]:checked').each(function(){\r\n\t// \t\t\tcustom_data[$(this).data('addon_name')] = $(this).val();\r\n\t// \t\t})\r\n\t// \t\t$(this).data('custom_data',custom_data)\r\n\t// \t})\r\n\t// \t/**\r\n\t// \t * Si un addon est toggle, force le form a vérifier son prix\r\n\t// \t * AB\r\n\t// \t */\r\n\t// \t$('[data-addon_name]').on('change',function(){\r\n\t// \t\t$('.variations_form').trigger('check_variations');\r\n\t// \t})\r\n\r\n\t// \t$('[data-addon-name] input').on('change',function(){\r\n\t// \t\tlet apply = $(this).parent().find('input:checked').val();\r\n\t// \t\tlet addon_price = $(this).parent().data('addon-price');\r\n\t// \t\tlet currency_selector = $('form.cart .woocommerce-Price-amount bdi span').remove()\r\n\t// \t\tlet price = +($('form.cart .woocommerce-Price-amount bdi').text())\r\n\t// \t\tlet el = $('<bdi></bdi>');\r\n\t// \t\tif(apply == 'true'){\r\n\t// \t\t\tel.text((price + addon_price).toFixed(2));\r\n\t// \t\t}else{\r\n\t// \t\t\tel.text((price - addon_price).toFixed(2));\r\n\t// \t\t}\r\n\t\t\t\r\n\t// \t\tel.prepend(currency_selector)\r\n\t// \t\t$('form.cart .woocommerce-Price-amount bdi').replaceWith(el)\r\n\t// \t})\r\n\t// }//init_custom_addon_woocommerce\r\n\r\n\t/**\r\n\t * Watch the product stock on a variable product to show it elsewhere\r\n\t * was neccessary because the price change via ajax in a script that can't be overriden (woocommerce)\r\n\t * AB\r\n\t */\r\n\tfunction watch_and_mimic_product_stock_variation(){\r\n\t\tif($('body.single-product').length == 0){\r\n\t\t\tif($('.variations_form').length > 0){\r\n\t\t\t\t$('.variations_form').on('change','input, select',function(){\r\n\t\t\t\t\tif($(this).val() === ''){\r\n\t\t\t\t\t\t$('.flex-wrap-gallery div.stock').hide()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif($('.woocommerce-variation.single_variation').find('div.stock').length >0){\r\n\t\t\t\tif($('.woocommerce-variation.single_variation').find('div.stock').css('display') == 'none'){\r\n\t\t\t\t\t$('.flex-wrap-gallery div.stock').hide()\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t$('.flex-wrap-gallery div.stock').hide()\r\n\t\t\t}\r\n\t\t}\r\n\t\t$('.woocommerce-variation.single_variation div.stock').on('DOMSubtreeModified',function(){\r\n\t\t\tlet stock_el = $(this);\r\n\t\t\tif(stock_el.length > 0){\r\n\t\t\t\t$('.flex-wrap-gallery div.stock').replaceWith(stock_el.clone())\r\n\t\t\t}\r\n\t\t\r\n\t\t})\r\n\r\n\t\t$('.woocommerce-variation.single_variation').on('DOMSubtreeModified',function(){\r\n\r\n\t\t\tlet stock_el = $(this).find('div.stock');\r\n\t\t\tif(stock_el.length > 0){\r\n\t\t\t\t$('.flex-wrap-gallery div.stock').replaceWith(stock_el.clone())\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(!$(this).css('display') == 'none'  ){\r\n\t\t\t\t$('.flex-wrap-gallery div.stock').hide()\r\n\t\t\t}\r\n\t\t})\r\n\t}//watch_and_mimic_product_stock_variation\r\n\r\n\tfunction init_save_for_later(){\r\n\t\t/**\r\n\t\t * Ajax pour ajouter des produits dans les favoris\r\n\t\t */\r\n\t\t$(document).on('click', '.add_to_fav', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tif($('body.logged-in').length > 0){\r\n\t\t\t\tvar $bouton = $(this);\r\n\t\t\t\tvar id = $(this).attr('href');\r\n\t\t\t\tvar post_id = id.replace(/\\D/g, '');\r\n\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'action': 'add_fav',\r\n\t\t\t\t\t'ID': post_id,\r\n\t\t\t\t\t'valid_fav': 'ajax-fav', // ajoute une validation\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t$.post(theme_client_data.ajax_url, data, function(res){\r\n\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t$bouton.toggleClass('added');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t}else{\r\n\t\t\t\tdisplayQuickMessage( phpData.translate.need_connect );\r\n\t\t\t}\r\n\t\t});\r\n\t}//init_save_for_later\r\n\r\n\tfunction init_subscribe_to_newsletter(){\r\n\t\t$('.infolettre, .newsletter-form').submit(function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar messageLog = $('.form-error-log');\r\n\t\r\n\t\t\tif(!validateEmail($(this).find('input[name=\"email\"]').val())){\r\n\t\t\t\tmessageLog.text(theme_client_data.traductions.email_invalid).removeClass('success processing').addClass('error');\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\t// update user interface\r\n\t\t\t\tmessageLog.html(theme_client_data.traductions.email_processing).removeClass('success error').addClass('processing');\r\n\t\t\t\t\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tajax: true,\r\n\t\t\t\t\temail: $(this).find('input[name=\"email\"]').val(),\r\n\t\t\t\t\taction: 'newsletter_subscription'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Prepare query string and send AJAX request\r\n\t\t\t\t$.post( theme_client_data.ajax_url, data, function(res){\r\n\t\t\t\t\tJSON.stringify(res);\r\n\t\r\n\t\t\t\t\tif(res.success){\t\t\t\t\r\n\t\t\t\t\t\tmessageLog.removeClass('error processing').addClass('success').html(res.message);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tmessageLog.removeClass('success processing').addClass('error').html(res.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 'json');\r\n\t\t\t\t\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t}//init_subscribe_to_newsletter\r\n\r\n\tfunction init_selectwoo_custom(){\r\n\t\t$('[data-s2]').each(function(){ $(this).selectWoo()});\r\n\r\n\t\t// selectwoo custom template adapter https://github.com/woocommerce/selectWoo/issues/39\r\n\t\t// corrige un bug pour l'attribut que est selected\r\n\t\t$.fn.selectWoo.amd.define('customSingleSelectionAdapter', [\r\n\t\t\t'select2/utils',\r\n\t\t\t'select2/selection/single',\r\n\t\t], function (Utils, SingleSelection) {\r\n\t\t\tconst adapter = SingleSelection;\r\n\t\t\tadapter.prototype.update = function (data) {\r\n\t\t\tif (data.length === 0) {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar selection = data[0];\r\n\t\t\tvar $rendered = this.$selection.find('.select2-selection__rendered');\r\n\t\t\tvar formatted = this.display(selection, $rendered);\r\n\t\t\t$rendered.empty().append(formatted);\r\n\t\t\t$rendered.prop('title', selection.title || selection.text);\r\n\t\t\t};\r\n\t\t\treturn adapter;\r\n\t\t});\r\n\r\n\t\t// Tout les select2 avec la class en question vont render la couleur dans data-color\r\n\t\t$('.with-color').selectWoo({\r\n\t\t\twidth: \"100%\",\r\n\t\t\tminimumResultsForSearch: -1,\r\n\t\t\ttemplateSelection: formatColor,\r\n\t\t\ttemplateResult: formatColor,\r\n\t\t\tselectionAdapter: $.fn.selectWoo.amd.require('customSingleSelectionAdapter'),\r\n\t\t\tallowHtml: true\r\n\t\t})\r\n\t\tfunction formatColor(state) {\r\n\t\t\tconst color = $(state.element).attr('data-color');\r\n\t\t\tif(color){\r\n\t\t\t\treturn $('<span><i style=\"font-size:1.5em;color:'+color+'\" class=\"fa fa-square\"></i> '+state.text+'</span>');\r\n\t\t\t}else{\r\n\t\t\t\treturn state.text;\r\n\t\t\t}\r\n\t\t}\r\n\t}//init_selectwoo_custom\r\n\r\n\tfunction single_product_js(){\r\n\t\t$('body').on('click','.technical-spec h3',function(){\r\n\t\t\t$('.technical-spec h3,.technical-spec ul').toggleClass('open');\r\n\t\t})\r\n\t\t$('body').on('click','.toggle_address',function(){\r\n\t\t\t$(this).parent().toggleClass('open');\r\n\t\t});\r\n\t\t$('body').on('click','.close-stock',function(){\r\n\t\t\t$('.pickup_stock ul').hide();\r\n\t\t})\r\n\t\t$('body').on('click','.check_availability',function(){\r\n\t\t\t$('.pickup_stock ul').toggle();\r\n\t\t})\r\n\t\t\r\n\t}//single_product_js\r\n\r\n\tfunction init_currencySelector(){\r\n\t\t$('.currecy-selector').on('click',function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar country = $(this).data('currency');\r\n\t\t\t$('#wcpbc-widget-country-switcher-form input[name=\"wcpbc-manual-country\"]').val(country);\r\n\t\t\t$('#wcpbc-widget-country-switcher-form').submit();\r\n\t\t});\r\n\t}//init_currencySelector()\r\n\r\n\tvar latestRequest = null;\r\n\tfunction ajax_filter_products(append){\r\n\t\tappend = append == undefined ? false : append;\r\n\t\t\r\n\t\tif($('.chosen').length > 0){\r\n\t\t\t$('.reset-filters').show();\r\n\t\t}else{\r\n\t\t\t$('.reset-filters').hide();\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\tajax: true,\r\n\t\t\taction: 'theme_client_ajax_woo_cat_filter'\r\n\t\t}\r\n\r\n\t\tif(append){\r\n\t\t\tdata['currentCount'] = $('.shop-products-wrapper .products > .product').length;\r\n\t\t\t$('.show-more-products').addClass('loading-more');\r\n\t\t\t$('.shop-products-wrapper').addClass('loading');\r\n\t\t}else{\r\n\t\t\t$('.shop-products-wrapper').addClass('loading');\r\n\t\t}\r\n\r\n\t\tif($('.widget_product_categories').length && $('.widget_product_categories').find('.chosen').length){\r\n\t\t\tvar catIDs = '';\r\n\r\n\t\t\t$('.widget_product_categories').find('.chosen').each(function(elem){\r\n\t\t\t\tthis.classList.forEach(function(className){\r\n\t\t\t\t\tif(className.indexOf('cat-item-') !== -1){\r\n\t\t\t\t\t\tcatIDs += className.replace('cat-item-', '')+',';\r\n\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tdata.catIDs = catIDs;\r\n\t\t}\r\n\r\n\t\tif($('.woocommerce-widget-layered-nav').length){\r\n\t\t\tvar attributes = [];\r\n\t\t\tvar url_filters= {};\r\n\t\t\tvar url_name=\"\";\r\n\t\t\tvar name = '';\r\n\t\t\t$('.filters-Tag').empty()\r\n\r\n\t\t\t$('.woocommerce-widget-layered-nav').each(function(){\r\n\t\t\t\tif($(this).find('.chosen').length){\r\n\t\t\t\t\tvar generalVars = new URL($(this).find('.chosen > a').attr('href'));\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar attributeName = '';\r\n\r\n\t\t\t\t\tfor(var key of generalVars.searchParams.keys()) { \r\n\t\t\t\t\t\tif(key.indexOf('filter_') !== -1){\r\n\t\t\t\t\t\t\tattributeName = key.replace('filter_', '');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar termSlugs = '';\r\n\t\t\t\t\tvar queryType = generalVars.searchParams.get('query_type_'+attributeName);\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(this).find('.chosen > a').each(function(elem){\r\n\t\t\t\t\t\tvar termURL = new URL($(this).attr('href'));\r\n\t\t\t\t\t\tvar slug =  termURL.searchParams.get('filter_'+attributeName);\r\n\t\t\t\t\t\ttermSlugs += slug+',';\r\n\t\t\t\t\t\t$(this).attr('data-slug',slug);\r\n\t\t\t\t\t\taddTags(slug);\r\n\t\t\t\t\t\turl_filters[\"filtre_\"+slug] = 'on';\r\n\t\t\t\t\t});\r\n\r\n\t\t\r\n\r\n\t\t\t\t\tattributes.push({\r\n\t\t\t\t\t\tname: attributeName,\r\n\t\t\t\t\t\tqueryType: queryType,\r\n\t\t\t\t\t\ttermSlugs: termSlugs\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tname = $('#search').val();\r\n\t\t\tif(name !== ''){\r\n\t\t\t\taddTags(name,'name')\r\n\t\t\t\turl_filters[\"filtre_name\"] = name;\r\n\r\n\t\t\t}\r\n\t\t\tif($('input[name=\"limit_product_cat\"]').length > 0 ){\r\n\t\t\t\tlet found = false;\r\n\t\t\t\tattributes.forEach(x=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(x.name == 'product_cat'){\r\n\t\t\t\t\t\tx.termSlugs += $('input[name=\"limit_product_cat\"]').val()+',';\r\n\t\t\t\t\t\tfound=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\t\tif(!found){\r\n\t\t\t\t\tattributes.push({\r\n\t\t\t\t\t\tname:'product_cat',\r\n\t\t\t\t\t\tqueryType:undefined,\r\n\t\t\t\t\t\ttermSlugs:$('input[name=\"limit_product_cat\"]').val()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\r\n\t\t\twindow.history.replaceState(null,null,'?'+Object.keys(url_filters).map(param => encodeURIComponent(param) + '=' + encodeURIComponent(url_filters[param])).join('&'));\r\n\t\t\t\r\n\t\t\tdata.name = name;\r\n\t\t\tdata.attributes = attributes;\r\n\t\t}\r\n\r\n\t\tlatestRequest = $.post( theme_client_data.ajax_url, data, function(res, status, jqXHR){\r\n\t\t\t\r\n\t\t\tJSON.stringify(res);\r\n\t\t\tif(latestRequest === jqXHR){\r\n\t\t\t\t\r\n\t\t\t\tif(!append){\r\n\t\t\t\t\t\r\n\t\t\t\t\t$('.shop-products-wrapper .products').empty();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif((res.count + $('.shop-products-wrapper .products > .product').length) >= res.total){\r\n\t\t\t\t\t$('.loadmore').hide();\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('.loadmore').show();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$('.shop-products-wrapper .products').append(res.html).removeClass('loading');\r\n\t\t\t\t$('.shop-products-wrapper').removeClass('loading');\r\n\t\t\t\t$('.show-more-products').removeClass('loading-more');\r\n\r\n\t\t\t}\r\n\t\t}, 'json');\r\n\t} // ajax_filter_products\r\n\r\n\r\n\t\t\r\n\r\n})(jQuery);\r\n\r\n"]}