{"version":3,"sources":["rellax.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","root","factory","define","amd","module","exports","Rellax","window","global","el","options","self","Object","create","posY","screenY","posX","screenX","blocks","pause","loop","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","loopId","supportsPassive","opts","defineProperty","get","addEventListener","removeEventListener","e","clearLoop","cancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","transformProp","testEl","document","createElement","style","transform","vendors","vendor","undefined","speed","verticalSpeed","horizontalSpeed","breakpoints","center","wrapper","relativeToWrapper","round","vertical","horizontal","verticalScrollAxis","horizontalScrollAxis","keys","forEach","key","length","Array","isArray","lastVal","isAscending","isNumerical","i","console","warn","validateCustomBreakpoints","elements","querySelectorAll","elems","nodeType","querySelector","currentBreakpoint","init","cssText","w","bp","innerHeight","innerWidth","setPosition","block","createBlock","push","cacheBlocks","animate","update","mapBreakpoints","dataPercentage","getAttribute","dataSpeed","dataXsSpeed","dataMobileSpeed","dataTabletSpeed","dataDesktopSpeed","dataVerticalSpeed","dataHorizontalSpeed","dataVericalScrollAxis","dataHorizontalScrollAxis","dataZindex","dataMin","dataMax","dataMinX","dataMaxX","dataMinY","dataMaxY","xs","sm","md","lg","wrapperPosY","scrollTop","pageYOffset","documentElement","body","offsetTop","scrollLeft","pageXOffset","blockTop","getBoundingClientRect","top","blockHeight","clientHeight","offsetHeight","scrollHeight","blockLeft","left","blockWidth","clientWidth","offsetWidth","scrollWidth","percentageY","percentageX","Number","bases","updatePosition","searchResult","exec","index","trimmedStyle","slice","delimiter","indexOf","replace","baseX","x","baseY","y","height","width","zindex","min","max","minX","maxX","minY","maxY","oldY","oldX","parentNode","scrollPosY","result","valueX","valueY","Math","deferredUpdate","passive","positions","toLowerCase","verticalScrollX","verticalScrollY","horizontalScrollX","positionY","positionX","translate","destroy","refresh"],"mappings":"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","file":"../rellax.min.js","sourcesContent":["// ------------------------------------------\r\n// Rellax.js\r\n// Buttery smooth parallax library\r\n// Copyright (c) 2016 Moe Amaya (@moeamaya)\r\n// MIT license\r\n//\r\n// Thanks to Paraxify.js and Jaime Cabllero\r\n// for parallax concepts\r\n// ------------------------------------------\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n      // AMD. Register as an anonymous module.\r\n      define([], factory);\r\n    } else if (typeof module === 'object' && module.exports) {\r\n      // Node. Does not work with strict CommonJS, but\r\n      // only CommonJS-like environments that support module.exports,\r\n      // like Node.\r\n      module.exports = factory();\r\n    } else {\r\n      // Browser globals (root is window)\r\n      root.Rellax = factory();\r\n    }\r\n  }(typeof window !== \"undefined\" ? window : global, function () {\r\n    var Rellax = function(el, options){\r\n      \"use strict\";\r\n  \r\n      var self = Object.create(Rellax.prototype);\r\n  \r\n      var posY = 0;\r\n      var screenY = 0;\r\n      var posX = 0;\r\n      var screenX = 0;\r\n      var blocks = [];\r\n      var pause = true;\r\n  \r\n      // check what requestAnimationFrame to use, and if\r\n      // it's not supported, use the onscroll event\r\n      var loop = window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n        window.msRequestAnimationFrame ||\r\n        window.oRequestAnimationFrame ||\r\n        function(callback){ return setTimeout(callback, 1000 / 60); };\r\n  \r\n      // store the id for later use\r\n      var loopId = null;\r\n  \r\n      // Test via a getter in the options object to see if the passive property is accessed\r\n      var supportsPassive = false;\r\n      try {\r\n        var opts = Object.defineProperty({}, 'passive', {\r\n          get: function() {\r\n            supportsPassive = true;\r\n          }\r\n        });\r\n        window.addEventListener(\"testPassive\", null, opts);\r\n        window.removeEventListener(\"testPassive\", null, opts);\r\n      } catch (e) {}\r\n  \r\n      // check what cancelAnimation method to use\r\n      var clearLoop = window.cancelAnimationFrame || window.mozCancelAnimationFrame || clearTimeout;\r\n  \r\n      // check which transform property to use\r\n      var transformProp = window.transformProp || (function(){\r\n          var testEl = document.createElement('div');\r\n          if (testEl.style.transform === null) {\r\n            var vendors = ['Webkit', 'Moz', 'ms'];\r\n            for (var vendor in vendors) {\r\n              if (testEl.style[ vendors[vendor] + 'Transform' ] !== undefined) {\r\n                return vendors[vendor] + 'Transform';\r\n              }\r\n            }\r\n          }\r\n          return 'transform';\r\n        })();\r\n  \r\n      // Default Settings\r\n      self.options = {\r\n        speed: -2,\r\n          verticalSpeed: null,\r\n          horizontalSpeed: null,\r\n        breakpoints: [576, 768, 1201],\r\n        center: false,\r\n        wrapper: null,\r\n        relativeToWrapper: false,\r\n        round: true,\r\n        vertical: true,\r\n        horizontal: false,\r\n        verticalScrollAxis: \"y\",\r\n        horizontalScrollAxis: \"x\",\r\n        callback: function() {},\r\n      };\r\n  \r\n      // User defined options (might have more in the future)\r\n      if (options){\r\n        Object.keys(options).forEach(function(key){\r\n          self.options[key] = options[key];\r\n        });\r\n      }\r\n  \r\n      function validateCustomBreakpoints () {\r\n        if (self.options.breakpoints.length === 3 && Array.isArray(self.options.breakpoints)) {\r\n          var isAscending = true;\r\n          var isNumerical = true;\r\n          var lastVal;\r\n          self.options.breakpoints.forEach(function (i) {\r\n            if (typeof i !== 'number') isNumerical = false;\r\n            if (lastVal !== null) {\r\n              if (i < lastVal) isAscending = false;\r\n            }\r\n            lastVal = i;\r\n          });\r\n          if (isAscending && isNumerical) return;\r\n        }\r\n        // revert defaults if set incorrectly\r\n        self.options.breakpoints = [576, 768, 1201];\r\n        console.warn(\"Rellax: You must pass an array of 3 numbers in ascending order to the breakpoints option. Defaults reverted\");\r\n      }\r\n  \r\n      if (options && options.breakpoints) {\r\n        validateCustomBreakpoints();\r\n      }\r\n  \r\n      // By default, rellax class\r\n      if (!el) {\r\n        el = '.rellax';\r\n      }\r\n  \r\n      // check if el is a className or a node\r\n      var elements = typeof el === 'string' ? document.querySelectorAll(el) : [el];\r\n  \r\n      // Now query selector\r\n      if (elements.length > 0) {\r\n        self.elems = elements;\r\n      }\r\n  \r\n      // The elements don't exist\r\n      else {\r\n        console.warn(\"Rellax: The elements you're trying to select don't exist.\");\r\n        return;\r\n      }\r\n  \r\n      // Has a wrapper and it exists\r\n      if (self.options.wrapper) {\r\n        if (!self.options.wrapper.nodeType) {\r\n          var wrapper = document.querySelector(self.options.wrapper);\r\n  \r\n          if (wrapper) {\r\n            self.options.wrapper = wrapper;\r\n          } else {\r\n            console.warn(\"Rellax: The wrapper you're trying to use doesn't exist.\");\r\n            return;\r\n          }\r\n        }\r\n      }\r\n  \r\n      // set a placeholder for the current breakpoint\r\n      var currentBreakpoint;\r\n  \r\n      // helper to determine current breakpoint\r\n      var getCurrentBreakpoint = function (w) {\r\n        var bp = self.options.breakpoints;\r\n        if (w < bp[0]) return 'xs';\r\n        if (w >= bp[0] && w < bp[1]) return 'sm';\r\n        if (w >= bp[1] && w < bp[2]) return 'md';\r\n        return 'lg';\r\n      };\r\n  \r\n      // Get and cache initial position of all elements\r\n      var cacheBlocks = function() {\r\n        for (var i = 0; i < self.elems.length; i++){\r\n          var block = createBlock(self.elems[i]);\r\n          blocks.push(block);\r\n        }\r\n      };\r\n  \r\n  \r\n      // Let's kick this script off\r\n      // Build array for cached element values\r\n      var init = function() {\r\n        for (var i = 0; i < blocks.length; i++){\r\n          self.elems[i].style.cssText = blocks[i].style;\r\n        }\r\n  \r\n        blocks = [];\r\n  \r\n        screenY = window.innerHeight;\r\n        screenX = window.innerWidth;\r\n        currentBreakpoint = getCurrentBreakpoint(screenX);\r\n  \r\n        setPosition();\r\n  \r\n        cacheBlocks();\r\n  \r\n        animate();\r\n  \r\n        // If paused, unpause and set listener for window resizing events\r\n        if (pause) {\r\n          window.addEventListener('resize', init);\r\n          pause = false;\r\n          // Start the loop\r\n          update();\r\n        }\r\n      };\r\n  \r\n      // We want to cache the parallax blocks'\r\n      // values: base, top, height, speed\r\n      // el: is dom object, return: el cache values\r\n      var createBlock = function(el) {\r\n        var dataPercentage = el.getAttribute( 'data-rellax-percentage' );\r\n        var dataSpeed = el.getAttribute( 'data-rellax-speed' );\r\n        var dataXsSpeed = el.getAttribute( 'data-rellax-xs-speed' );\r\n        var dataMobileSpeed = el.getAttribute( 'data-rellax-mobile-speed' );\r\n        var dataTabletSpeed = el.getAttribute( 'data-rellax-tablet-speed' );\r\n        var dataDesktopSpeed = el.getAttribute( 'data-rellax-desktop-speed' );\r\n        var dataVerticalSpeed = el.getAttribute('data-rellax-vertical-speed');\r\n        var dataHorizontalSpeed = el.getAttribute('data-rellax-horizontal-speed');\r\n        var dataVericalScrollAxis = el.getAttribute('data-rellax-vertical-scroll-axis');\r\n        var dataHorizontalScrollAxis = el.getAttribute('data-rellax-horizontal-scroll-axis');\r\n        var dataZindex = el.getAttribute( 'data-rellax-zindex' ) || 0;\r\n        var dataMin = el.getAttribute( 'data-rellax-min' );\r\n        var dataMax = el.getAttribute( 'data-rellax-max' );\r\n        var dataMinX = el.getAttribute('data-rellax-min-x');\r\n        var dataMaxX = el.getAttribute('data-rellax-max-x');\r\n        var dataMinY = el.getAttribute('data-rellax-min-y');\r\n        var dataMaxY = el.getAttribute('data-rellax-max-y');\r\n        var mapBreakpoints;\r\n        var breakpoints = true;\r\n  \r\n        if (!dataXsSpeed && !dataMobileSpeed && !dataTabletSpeed && !dataDesktopSpeed) {\r\n          breakpoints = false;\r\n        } else {\r\n          mapBreakpoints = {\r\n            'xs': dataXsSpeed,\r\n            'sm': dataMobileSpeed,\r\n            'md': dataTabletSpeed,\r\n            'lg': dataDesktopSpeed\r\n          };\r\n        }\r\n  \r\n        // initializing at scrollY = 0 (top of browser), scrollX = 0 (left of browser)\r\n        // ensures elements are positioned based on HTML layout.\r\n        //\r\n        // If the element has the percentage attribute, the posY and posX needs to be\r\n        // the current scroll position's value, so that the elements are still positioned based on HTML layout\r\n        var wrapperPosY = self.options.wrapper ? self.options.wrapper.scrollTop : (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop);\r\n        // If the option relativeToWrapper is true, use the wrappers offset to top, subtracted from the current page scroll.\r\n        if (self.options.relativeToWrapper) {\r\n          var scrollPosY = (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop);\r\n          wrapperPosY = scrollPosY - self.options.wrapper.offsetTop;\r\n        }\r\n        var posY = self.options.vertical ? ( dataPercentage || self.options.center ? wrapperPosY : 0 ) : 0;\r\n        var posX = self.options.horizontal ? ( dataPercentage || self.options.center ? self.options.wrapper ? self.options.wrapper.scrollLeft : (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft) : 0 ) : 0;\r\n  \r\n        var blockTop = posY + el.getBoundingClientRect().top;\r\n        var blockHeight = el.clientHeight || el.offsetHeight || el.scrollHeight;\r\n  \r\n        var blockLeft = posX + el.getBoundingClientRect().left;\r\n        var blockWidth = el.clientWidth || el.offsetWidth || el.scrollWidth;\r\n  \r\n        // apparently parallax equation everyone uses\r\n        var percentageY = dataPercentage ? dataPercentage : (posY - blockTop + screenY) / (blockHeight + screenY);\r\n        var percentageX = dataPercentage ? dataPercentage : (posX - blockLeft + screenX) / (blockWidth + screenX);\r\n        if(self.options.center){ percentageX = 0.5; percentageY = 0.5; }\r\n  \r\n        // Optional individual block speed as data attr, otherwise global speed\r\n        var speed = (breakpoints && mapBreakpoints[currentBreakpoint] !== null) ? Number(mapBreakpoints[currentBreakpoint]) : (dataSpeed ? dataSpeed : self.options.speed);\r\n        var verticalSpeed = dataVerticalSpeed ? dataVerticalSpeed : self.options.verticalSpeed;\r\n        var horizontalSpeed = dataHorizontalSpeed ? dataHorizontalSpeed : self.options.horizontalSpeed;\r\n  \r\n        // Optional individual block movement axis direction as data attr, otherwise gobal movement direction\r\n        var verticalScrollAxis = dataVericalScrollAxis ? dataVericalScrollAxis : self.options.verticalScrollAxis;\r\n        var horizontalScrollAxis = dataHorizontalScrollAxis ? dataHorizontalScrollAxis : self.options.horizontalScrollAxis;\r\n  \r\n        var bases = updatePosition(percentageX, percentageY, speed, verticalSpeed, horizontalSpeed);\r\n  \r\n        // ~~Store non-translate3d transforms~~\r\n        // Store inline styles and extract transforms\r\n        var style = el.style.cssText;\r\n        var transform = '';\r\n  \r\n        // Check if there's an inline styled transform\r\n        var searchResult = /transform\\s*:/i.exec(style);\r\n        if (searchResult) {\r\n          // Get the index of the transform\r\n          var index = searchResult.index;\r\n  \r\n          // Trim the style to the transform point and get the following semi-colon index\r\n          var trimmedStyle = style.slice(index);\r\n          var delimiter = trimmedStyle.indexOf(';');\r\n  \r\n          // Remove \"transform\" string and save the attribute\r\n          if (delimiter) {\r\n            transform = \" \" + trimmedStyle.slice(11, delimiter).replace(/\\s/g,'');\r\n          } else {\r\n            transform = \" \" + trimmedStyle.slice(11).replace(/\\s/g,'');\r\n          }\r\n        }\r\n  \r\n        return {\r\n          baseX: bases.x,\r\n          baseY: bases.y,\r\n          top: blockTop,\r\n          left: blockLeft,\r\n          height: blockHeight,\r\n          width: blockWidth,\r\n          speed: speed,\r\n          verticalSpeed: verticalSpeed,\r\n          horizontalSpeed: horizontalSpeed,\r\n          verticalScrollAxis: verticalScrollAxis,\r\n          horizontalScrollAxis: horizontalScrollAxis,\r\n          style: style,\r\n          transform: transform,\r\n          zindex: dataZindex,\r\n          min: dataMin,\r\n          max: dataMax,\r\n          minX: dataMinX,\r\n          maxX: dataMaxX,\r\n          minY: dataMinY,\r\n          maxY: dataMaxY\r\n        };\r\n      };\r\n  \r\n      // set scroll position (posY, posX)\r\n      // side effect method is not ideal, but okay for now\r\n      // returns true if the scroll changed, false if nothing happened\r\n      var setPosition = function() {\r\n        var oldY = posY;\r\n        var oldX = posX;\r\n  \r\n        posY = self.options.wrapper ? self.options.wrapper.scrollTop : (document.documentElement || document.body.parentNode || document.body).scrollTop || window.pageYOffset;\r\n        posX = self.options.wrapper ? self.options.wrapper.scrollLeft : (document.documentElement || document.body.parentNode || document.body).scrollLeft || window.pageXOffset;\r\n        // If option relativeToWrapper is true, use relative wrapper value instead.\r\n        if (self.options.relativeToWrapper) {\r\n          var scrollPosY = (document.documentElement || document.body.parentNode || document.body).scrollTop || window.pageYOffset;\r\n          posY = scrollPosY - self.options.wrapper.offsetTop;\r\n        }\r\n  \r\n  \r\n        if (oldY != posY && self.options.vertical) {\r\n          // scroll changed, return true\r\n          return true;\r\n        }\r\n  \r\n        if (oldX != posX && self.options.horizontal) {\r\n          // scroll changed, return true\r\n          return true;\r\n        }\r\n  \r\n        // scroll did not change\r\n        return false;\r\n      };\r\n  \r\n      // Ahh a pure function, gets new transform value\r\n      // based on scrollPosition and speed\r\n      // Allow for decimal pixel values\r\n      var updatePosition = function(percentageX, percentageY, speed, verticalSpeed, horizontalSpeed) {\r\n        var result = {};\r\n        var valueX = ((horizontalSpeed ? horizontalSpeed : speed) * (100 * (1 - percentageX)));\r\n        var valueY = ((verticalSpeed ? verticalSpeed : speed) * (100 * (1 - percentageY)));\r\n  \r\n        result.x = self.options.round ? Math.round(valueX) : Math.round(valueX * 100) / 100;\r\n        result.y = self.options.round ? Math.round(valueY) : Math.round(valueY * 100) / 100;\r\n  \r\n        return result;\r\n      };\r\n  \r\n      // Remove event listeners and loop again\r\n      var deferredUpdate = function() {\r\n        window.removeEventListener('resize', deferredUpdate);\r\n        window.removeEventListener('orientationchange', deferredUpdate);\r\n        (self.options.wrapper ? self.options.wrapper : window).removeEventListener('scroll', deferredUpdate);\r\n        (self.options.wrapper ? self.options.wrapper : document).removeEventListener('touchmove', deferredUpdate);\r\n  \r\n        // loop again\r\n        loopId = loop(update);\r\n      };\r\n  \r\n      // Loop\r\n      var update = function() {\r\n        if (setPosition() && pause === false) {\r\n          animate();\r\n  \r\n          // loop again\r\n          loopId = loop(update);\r\n        } else {\r\n          loopId = null;\r\n  \r\n          // Don't animate until we get a position updating event\r\n          window.addEventListener('resize', deferredUpdate);\r\n          window.addEventListener('orientationchange', deferredUpdate);\r\n          (self.options.wrapper ? self.options.wrapper : window).addEventListener('scroll', deferredUpdate, supportsPassive ? { passive: true } : false);\r\n          (self.options.wrapper ? self.options.wrapper : document).addEventListener('touchmove', deferredUpdate, supportsPassive ? { passive: true } : false);\r\n        }\r\n      };\r\n  \r\n      // Transform3d on parallax element\r\n      var animate = function() {\r\n        var positions;\r\n        for (var i = 0; i < self.elems.length; i++){\r\n          // Determine relevant movement directions\r\n          var verticalScrollAxis = blocks[i].verticalScrollAxis.toLowerCase();\r\n          var horizontalScrollAxis = blocks[i].horizontalScrollAxis.toLowerCase();\r\n          var verticalScrollX = verticalScrollAxis.indexOf(\"x\") != -1 ? posY : 0;\r\n          var verticalScrollY = verticalScrollAxis.indexOf(\"y\") != -1 ? posY : 0;\r\n          var horizontalScrollX = horizontalScrollAxis.indexOf(\"x\") != -1 ? posX : 0;\r\n          var horizontalScrollY = horizontalScrollAxis.indexOf(\"y\") != -1 ? posX : 0;\r\n  \r\n          var percentageY = ((verticalScrollY + horizontalScrollY - blocks[i].top + screenY) / (blocks[i].height + screenY));\r\n          var percentageX = ((verticalScrollX + horizontalScrollX - blocks[i].left + screenX) / (blocks[i].width + screenX));\r\n  \r\n          // Subtracting initialize value, so element stays in same spot as HTML\r\n          positions = updatePosition(percentageX, percentageY, blocks[i].speed, blocks[i].verticalSpeed, blocks[i].horizontalSpeed);\r\n          var positionY = positions.y - blocks[i].baseY;\r\n          var positionX = positions.x - blocks[i].baseX;\r\n  \r\n          // The next two \"if\" blocks go like this:\r\n          // Check if a limit is defined (first \"min\", then \"max\");\r\n          // Check if we need to change the Y or the X\r\n          // (Currently working only if just one of the axes is enabled)\r\n          // Then, check if the new position is inside the allowed limit\r\n          // If so, use new position. If not, set position to limit.\r\n  \r\n          // Check if a min limit is defined\r\n          if (blocks[i].min !== null) {\r\n            if (self.options.vertical && !self.options.horizontal) {\r\n              positionY = positionY <= blocks[i].min ? blocks[i].min : positionY;\r\n            }\r\n            if (self.options.horizontal && !self.options.vertical) {\r\n              positionX = positionX <= blocks[i].min ? blocks[i].min : positionX;\r\n            }\r\n          }\r\n  \r\n          // Check if directional min limits are defined\r\n          if (blocks[i].minY != null) {\r\n              positionY = positionY <= blocks[i].minY ? blocks[i].minY : positionY;\r\n          }\r\n          if (blocks[i].minX != null) {\r\n              positionX = positionX <= blocks[i].minX ? blocks[i].minX : positionX;\r\n          }\r\n  \r\n          // Check if a max limit is defined\r\n          if (blocks[i].max !== null) {\r\n            if (self.options.vertical && !self.options.horizontal) {\r\n              positionY = positionY >= blocks[i].max ? blocks[i].max : positionY;\r\n            }\r\n            if (self.options.horizontal && !self.options.vertical) {\r\n              positionX = positionX >= blocks[i].max ? blocks[i].max : positionX;\r\n            }\r\n          }\r\n  \r\n          // Check if directional max limits are defined\r\n          if (blocks[i].maxY != null) {\r\n              positionY = positionY >= blocks[i].maxY ? blocks[i].maxY : positionY;\r\n          }\r\n          if (blocks[i].maxX != null) {\r\n              positionX = positionX >= blocks[i].maxX ? blocks[i].maxX : positionX;\r\n          }\r\n  \r\n          var zindex = blocks[i].zindex;\r\n  \r\n          // Move that element\r\n          // (Set the new translation and append initial inline transforms.)\r\n          var translate = 'translate3d(' + (self.options.horizontal ? positionX : '0') + 'px,' + (self.options.vertical ? positionY : '0') + 'px,' + zindex + 'px) ' + blocks[i].transform;\r\n          self.elems[i].style[transformProp] = translate;\r\n        }\r\n        self.options.callback(positions);\r\n      };\r\n  \r\n      self.destroy = function() {\r\n        for (var i = 0; i < self.elems.length; i++){\r\n          self.elems[i].style.cssText = blocks[i].style;\r\n        }\r\n  \r\n        // Remove resize event listener if not pause, and pause\r\n        if (!pause) {\r\n          window.removeEventListener('resize', init);\r\n          pause = true;\r\n        }\r\n  \r\n        // Clear the animation loop to prevent possible memory leak\r\n        clearLoop(loopId);\r\n        loopId = null;\r\n      };\r\n  \r\n      // Init\r\n      init();\r\n  \r\n      // Allow to recalculate the initial values whenever we want\r\n      self.refresh = init;\r\n  \r\n      return self;\r\n    };\r\n    return Rellax;\r\n  }));"]}