{"version":3,"sources":["enclosure-finder.js"],"names":["in_array","needle","haystack","i","finder","element","currentSize","conversions","in","mm","rate","modifier","x","toFixed","ready","document","readyState","setTimeout","init","addEventListener","getElementById","e","target","id","toggle","querySelectorAll","forEach","btn","classList","remove","add","clicked","getAttribute","Object","keys","option","size_string","innerHTML","size_array","split","length","parseFloat","jQuery","select2","preventDefault","querySelector","reset","submit","checked","value","Event","dispatchEvent","el","this","contains"],"mappings":"AAEA,SAASA,SAASC,EAAQC,GACtB,IAAI,IAAIC,KAAKD,EACT,GAAGA,EAASC,IAAMF,EAAQ,OAAO,EAErC,OAAO,EAIX,IAAMG,OAAS,CACXC,QAAQ,KACRC,YAAY,KACZC,YAAa,CACTC,GAAG,CACCC,GAAG,CACCC,KAAK,KACLC,SAAS,SAACC,GAAD,OAAMA,EAAEC,QAAQ,MAIjCJ,GAAG,CACCD,GAAG,CACCE,KAAK,SACLC,SAAS,SAACC,GAAD,OAAMA,EAAEC,QAAQ,OAKrCC,MAAM,WAC0B,aAAxBC,SAASC,YAAqD,gBAAxBD,SAASC,WAC/CC,WAAWb,OAAOc,KAAM,GAExBH,SAASI,iBAAiB,mBAAoBf,OAAOc,OAG7DA,KAAK,WACDd,OAAOC,QAAUU,SAASK,eAAe,MAEtChB,OAAOC,UACND,OAAOC,QAAQc,iBAAiB,SAAQ,SAASE,GAC3B,MAAfA,EAAEC,OAAOC,IACRnB,OAAOoB,YAGfpB,OAAOC,QAAQoB,iBAAiB,eAAeC,SAAQ,SAAAC,GACnDA,EAAIR,iBAAiB,SAAQ,SAASE,GAClCjB,OAAOC,QAAQoB,iBAAiB,eAAeC,SAAQ,SAAAd,GACnDA,EAAEgB,UAAUC,OAAO,eAEvBR,EAAEC,OAAOM,UAAUE,IAAI,YACvB,IAAIC,EAAUV,EAAEC,OAAOU,aAAa,aACjCD,GAAW3B,OAAOE,aACdN,SAAS+B,EAAQE,OAAOC,KAAK9B,OAAOG,gBAEnCH,OAAOC,QAAQoB,iBAAiB,uBAAuBC,SAAQ,SAAAS,GAG3D,IAFA,IAAIC,EAAcD,EAAOE,UACrBC,EAAaF,EAAYG,MAAM,KAC3BpC,EAAI,EAAIA,EAAImC,EAAWE,OAASrC,IACpCmC,EAAWnC,GAAKsC,WAAWH,EAAWnC,IAAMC,OAAOG,YAAYH,OAAOE,aAAayB,GAASrB,KACzFN,OAAOG,YAAYH,OAAOE,aAAayB,GAASpB,WAC/C2B,EAAWnC,GAAKC,OAAOG,YAAYH,OAAOE,aAAayB,GAASpB,SAAS2B,EAAWnC,KAG5FiC,EAAcE,EAAW,GAAG,MAAMA,EAAW,GAAG,MAAMA,EAAW,GACjEH,EAAOE,UAAYD,KAEvBhC,OAAOE,YAAcyB,EACrBW,OAAO,gBAAgBC,iBAMvC5B,SAASU,iBAAiB,kCAAkCC,SAAQ,SAAAC,GAChEA,EAAIR,iBAAiB,SAAQ,SAASE,GAClCA,EAAEuB,iBACFxC,OAAOoB,eAGfpB,OAAOC,QAAQwC,cAAc,iBAAiB1B,iBAAiB,QAAQf,OAAO0C,OAC9E1C,OAAOC,QAAQwC,cAAc,yBAAyB1B,iBAAiB,SAAQ,WAAWJ,SAAS8B,cAAc,sBAAsBE,cAG/ID,MAAO,WACH1C,OAAOC,QAAQoB,iBAAiB,iBAAiBC,SAAQ,SAAAd,GACrDA,EAAEoC,SAAU,KAEhB5C,OAAOC,QAAQoB,iBAAiB,UAAUC,SAAQ,SAAAd,GAC9CA,EAAEqC,MAAQ,GACV,IAAM5B,EAAI,IAAI6B,MAAM,UACpBtC,EAAEuC,cAAc9B,OAGxBG,OAAO,WACH,IACM4B,EAAKC,KAAKhD,QACb+C,EAAGxB,UAAU0B,SAAS,SACrBF,EAAGxB,UAAUE,IAAI,YACjBsB,EAAGxB,UAAUC,OAAO,QACpBZ,YAAW,WACPmC,EAAGxB,UAAUC,OAAO,cANT,OASfuB,EAAGxB,UAAUE,IAAI,WACjBb,YAAW,WACPmC,EAAGxB,UAAUE,IAAI,QACjBsB,EAAGxB,UAAUC,OAAO,aAZT,QAqB3BzB,OAAOU","file":"../enclosure-finder.min.js","sourcesContent":["/* Enclosure finder scripts */\r\n\r\nfunction in_array(needle, haystack) {\r\n    for(var i in haystack) {\r\n        if(haystack[i] == needle) return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\nconst finder = {\r\n    element:null,\r\n    currentSize:\"in\",\r\n    conversions: {\r\n        in:{\r\n            mm:{\r\n                rate:25.4,\r\n                modifier:(x)=> x.toFixed(2)\r\n            }\r\n            \r\n        },\r\n        mm:{\r\n            in:{\r\n                rate:0.0393701,\r\n                modifier:(x)=> x.toFixed(0)\r\n            }\r\n            \r\n        }\r\n    },\r\n    ready:function(){\r\n        if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\r\n            setTimeout(finder.init, 1);\r\n        } else { \r\n            document.addEventListener(\"DOMContentLoaded\", finder.init);\r\n        }\r\n    },\r\n    init:function(){\r\n        finder.element = document.getElementById('EF');\r\n        \r\n        if(finder.element){\r\n            finder.element.addEventListener('click',function(e){\r\n                if(e.target.id == 'EF'){\r\n                    finder.toggle();\r\n                }\r\n            })\r\n            finder.element.querySelectorAll('[data-size]').forEach(btn => {\r\n                btn.addEventListener('click',function(e){\r\n                    finder.element.querySelectorAll('[data-size]').forEach(x=>{\r\n                        x.classList.remove('selected')\r\n                    })\r\n                    e.target.classList.add('selected')\r\n                    let clicked = e.target.getAttribute('data-size');\r\n                    if(clicked != finder.currentSize){                 \r\n                        if(in_array(clicked,Object.keys(finder.conversions))){\r\n\r\n                            finder.element.querySelectorAll('.size-select option').forEach(option => {\r\n                                let size_string = option.innerHTML;\r\n                                let size_array = size_string.split('x');\r\n                                for(let i = 0 ; i < size_array.length ; i++){\r\n                                    size_array[i] = parseFloat(size_array[i]) * finder.conversions[finder.currentSize][clicked].rate;\r\n                                    if(finder.conversions[finder.currentSize][clicked].modifier){\r\n                                        size_array[i] = finder.conversions[finder.currentSize][clicked].modifier(size_array[i]);\r\n                                    }\r\n                                }\r\n                                size_string = size_array[0]+' x '+size_array[1]+' x '+size_array[2];\r\n                                option.innerHTML = size_string;\r\n                            })\r\n                            finder.currentSize = clicked\r\n                            jQuery('.size-select').select2();\r\n                        }\r\n\r\n                    }\r\n                })\r\n            });\r\n            document.querySelectorAll('.search-trigger, .close-search').forEach(btn => {\r\n                btn.addEventListener('click',function(e){\r\n                    e.preventDefault()\r\n                    finder.toggle()\r\n                })\r\n            })\r\n            finder.element.querySelector('.reset-finder').addEventListener('click',finder.reset)\r\n            finder.element.querySelector('.finder-footer button').addEventListener('click',function(){document.querySelector('form.popup-content').submit()})\r\n        }\r\n    },\r\n    reset: function(){\r\n        finder.element.querySelectorAll('input:checked').forEach(x=>{\r\n            x.checked = false;\r\n        })\r\n        finder.element.querySelectorAll('select').forEach(x=>{\r\n            x.value = '';\r\n            const e = new Event('change');\r\n            x.dispatchEvent(e);\r\n        })\r\n    },\r\n    toggle:function(){\r\n        const timingAnim = 250;\r\n        const el = this.element;\r\n        if(el.classList.contains('open')){\r\n            el.classList.add('open-out');\r\n            el.classList.remove('open');\r\n            setTimeout(function(){\r\n                el.classList.remove('open-out');\r\n            },timingAnim);\r\n        }else{\r\n            el.classList.add('open-in');\r\n            setTimeout(function(){\r\n                el.classList.add('open');\r\n                el.classList.remove('open-in');\r\n\r\n            },timingAnim);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nfinder.ready()\r\n\r\n"]}