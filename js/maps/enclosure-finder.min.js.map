{"version":3,"sources":["enclosure-finder.js"],"names":["in_array","needle","haystack","i","finder","element","currentSize","conversions","in","mm","rate","modifier","x","toFixed","ready","document","readyState","setTimeout","init","addEventListener","getElementById","e","target","id","toggle","querySelectorAll","forEach","btn","classList","remove","add","clicked","getAttribute","Object","keys","option","size_string","innerHTML","size_array","split","length","parseFloat","jQuery","select2","preventDefault","querySelector","reset","submit","checked","value","Event","dispatchEvent","el","this","contains"],"mappings":"AAEA,SAASA,SAASC,EAAQC,GACtB,IAAI,IAAIC,KAAKD,EACT,GAAGA,EAASC,IAAMF,EAAQ,OAAO,EAErC,OAAO,CACX,CAGA,IAAMG,OAAS,CACXC,QAAQ,KACRC,YAAY,KACZC,YAAa,CACTC,GAAG,CACCC,GAAG,CACCC,KAAK,KACLC,SAAS,SAACC,GAAC,OAAIA,EAAEC,QAAQ,EAAE,IAInCJ,GAAG,CACCD,GAAG,CACCE,KAAK,SACLC,SAAS,SAACC,GAAC,OAAIA,EAAEC,QAAQ,EAAE,KAKvCC,MAAM,WAC0B,aAAxBC,SAASC,YAAqD,gBAAxBD,SAASC,WAC/CC,WAAWb,OAAOc,KAAM,GAExBH,SAASI,iBAAiB,mBAAoBf,OAAOc,KAE7D,EACAA,KAAK,WACDd,OAAOC,QAAUU,SAASK,eAAe,MAEtChB,OAAOC,UACND,OAAOC,QAAQc,iBAAiB,SAAQ,SAASE,GAC3B,MAAfA,EAAEC,OAAOC,IACRnB,OAAOoB,QAEf,IACApB,OAAOC,QAAQoB,iBAAiB,eAAeC,SAAQ,SAAAC,GACnDA,EAAIR,iBAAiB,SAAQ,SAASE,GAClCjB,OAAOC,QAAQoB,iBAAiB,eAAeC,SAAQ,SAAAd,GACnDA,EAAEgB,UAAUC,OAAO,WACvB,IACAR,EAAEC,OAAOM,UAAUE,IAAI,YACvB,IAAIC,EAAUV,EAAEC,OAAOU,aAAa,aACjCD,GAAW3B,OAAOE,aACdN,SAAS+B,EAAQE,OAAOC,KAAK9B,OAAOG,gBAEnCH,OAAOC,QAAQoB,iBAAiB,uBAAuBC,SAAQ,SAAAS,GAG3D,IAFA,IAAIC,EAAcD,EAAOE,UACrBC,EAAaF,EAAYG,MAAM,KAC3BpC,EAAI,EAAIA,EAAImC,EAAWE,OAASrC,IACpCmC,EAAWnC,GAAKsC,WAAWH,EAAWnC,IAAMC,OAAOG,YAAYH,OAAOE,aAAayB,GAASrB,KACzFN,OAAOG,YAAYH,OAAOE,aAAayB,GAASpB,WAC/C2B,EAAWnC,GAAKC,OAAOG,YAAYH,OAAOE,aAAayB,GAASpB,SAAS2B,EAAWnC,KAG5FiC,EAAcE,EAAW,GAAG,MAAMA,EAAW,GAAG,MAAMA,EAAW,GACjEH,EAAOE,UAAYD,CACvB,IACAhC,OAAOE,YAAcyB,EACrBW,OAAO,gBAAgBC,UAInC,GACJ,IACA5B,SAASU,iBAAiB,kCAAkCC,SAAQ,SAAAC,GAChEA,EAAIR,iBAAiB,SAAQ,SAASE,GAClCA,EAAEuB,iBACFxC,OAAOoB,QACX,GACJ,IACApB,OAAOC,QAAQwC,cAAc,iBAAiB1B,iBAAiB,QAAQf,OAAO0C,OAC9E1C,OAAOC,QAAQwC,cAAc,yBAAyB1B,iBAAiB,SAAQ,WAAWJ,SAAS8B,cAAc,sBAAsBE,QAAQ,IAEvJ,EACAD,MAAO,WACH1C,OAAOC,QAAQoB,iBAAiB,iBAAiBC,SAAQ,SAAAd,GACrDA,EAAEoC,SAAU,CAChB,IACA5C,OAAOC,QAAQoB,iBAAiB,UAAUC,SAAQ,SAAAd,GAC9CA,EAAEqC,MAAQ,GACV,IAAM5B,EAAI,IAAI6B,MAAM,UACpBtC,EAAEuC,cAAc9B,EACpB,GACJ,EACAG,OAAO,WACH,IACM4B,EAAKC,KAAKhD,QACb+C,EAAGxB,UAAU0B,SAAS,SACrBF,EAAGxB,UAAUE,IAAI,YACjBsB,EAAGxB,UAAUC,OAAO,QACpBZ,YAAW,WACPmC,EAAGxB,UAAUC,OAAO,WACxB,GAPe,OASfuB,EAAGxB,UAAUE,IAAI,WACjBb,YAAW,WACPmC,EAAGxB,UAAUE,IAAI,QACjBsB,EAAGxB,UAAUC,OAAO,UAExB,GAde,KAgBvB,GAKJzB,OAAOU","file":"../enclosure-finder.min.js","sourcesContent":["/* Enclosure finder scripts */\n\nfunction in_array(needle, haystack) {\n    for(var i in haystack) {\n        if(haystack[i] == needle) return true;\n    }\n    return false;\n}\n\n\nconst finder = {\n    element:null,\n    currentSize:\"in\",\n    conversions: {\n        in:{\n            mm:{\n                rate:25.4,\n                modifier:(x)=> x.toFixed(2)\n            }\n            \n        },\n        mm:{\n            in:{\n                rate:0.0393701,\n                modifier:(x)=> x.toFixed(0)\n            }\n            \n        }\n    },\n    ready:function(){\n        if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n            setTimeout(finder.init, 1);\n        } else { \n            document.addEventListener(\"DOMContentLoaded\", finder.init);\n        }\n    },\n    init:function(){\n        finder.element = document.getElementById('EF');\n        \n        if(finder.element){\n            finder.element.addEventListener('click',function(e){\n                if(e.target.id == 'EF'){\n                    finder.toggle();\n                }\n            })\n            finder.element.querySelectorAll('[data-size]').forEach(btn => {\n                btn.addEventListener('click',function(e){\n                    finder.element.querySelectorAll('[data-size]').forEach(x=>{\n                        x.classList.remove('selected')\n                    })\n                    e.target.classList.add('selected')\n                    let clicked = e.target.getAttribute('data-size');\n                    if(clicked != finder.currentSize){                 \n                        if(in_array(clicked,Object.keys(finder.conversions))){\n\n                            finder.element.querySelectorAll('.size-select option').forEach(option => {\n                                let size_string = option.innerHTML;\n                                let size_array = size_string.split('x');\n                                for(let i = 0 ; i < size_array.length ; i++){\n                                    size_array[i] = parseFloat(size_array[i]) * finder.conversions[finder.currentSize][clicked].rate;\n                                    if(finder.conversions[finder.currentSize][clicked].modifier){\n                                        size_array[i] = finder.conversions[finder.currentSize][clicked].modifier(size_array[i]);\n                                    }\n                                }\n                                size_string = size_array[0]+' x '+size_array[1]+' x '+size_array[2];\n                                option.innerHTML = size_string;\n                            })\n                            finder.currentSize = clicked\n                            jQuery('.size-select').select2();\n                        }\n\n                    }\n                })\n            });\n            document.querySelectorAll('.search-trigger, .close-search').forEach(btn => {\n                btn.addEventListener('click',function(e){\n                    e.preventDefault()\n                    finder.toggle()\n                })\n            })\n            finder.element.querySelector('.reset-finder').addEventListener('click',finder.reset)\n            finder.element.querySelector('.finder-footer button').addEventListener('click',function(){document.querySelector('form.popup-content').submit()})\n        }\n    },\n    reset: function(){\n        finder.element.querySelectorAll('input:checked').forEach(x=>{\n            x.checked = false;\n        })\n        finder.element.querySelectorAll('select').forEach(x=>{\n            x.value = '';\n            const e = new Event('change');\n            x.dispatchEvent(e);\n        })\n    },\n    toggle:function(){\n        const timingAnim = 250;\n        const el = this.element;\n        if(el.classList.contains('open')){\n            el.classList.add('open-out');\n            el.classList.remove('open');\n            setTimeout(function(){\n                el.classList.remove('open-out');\n            },timingAnim);\n        }else{\n            el.classList.add('open-in');\n            setTimeout(function(){\n                el.classList.add('open');\n                el.classList.remove('open-in');\n\n            },timingAnim);\n        }\n    }\n}\n\n\n\nfinder.ready()\n\n"]}