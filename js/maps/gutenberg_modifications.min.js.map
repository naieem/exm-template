{"version":3,"sources":["gutenberg_modifications.js"],"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","addFilter","wp","hooks","__","i18n","createHigherOrderComponent","compose","Fragment","element","InspectorControls","blockEditor","_wp$components","components","PanelBody","SelectControl","addBorderOption","props","name","attributes","imgClass","type","default","withimgClassControl","BlockEdit","React","createElement","className","label","value","options","onChange","newVal","setAttributes","imgClassExtraProps","saveElementProps","blockType"],"mappings":"AAAA,SAASA,WAAiS,OAApRA,SAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcP,OAAOS,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,GAAU,CAAE,OAAOL,CAAQ,EAAUJ,SAASa,MAAMC,KAAMR,UAAY,CAGlV,IAAQS,UAAcC,GAAGC,MAAjBF,UACAG,GAAOF,GAAGG,KAAVD,GAEAE,2BAA+BJ,GAAGK,QAAlCD,2BACAE,SAAaN,GAAGO,QAAhBD,SACAE,kBAAsBR,GAAGS,YAAzBD,kBACRE,eAAqCV,GAAGW,WAAhCC,UAASF,eAATE,UAAWC,cAAaH,eAAbG,cAMbC,gBAAkB,SAAEC,EAAOC,GAUhC,MATW,cAARA,IAEFD,EAAME,WAAahC,OAAOC,OAAQ6B,EAAME,WAAY,CACnDC,SAAU,CACTC,KAAM,SACNC,QAAS,OAILL,CACR,EAAEhB,UAAW,2BAA4B,8BAA+Be,iBAKxE,IAAMO,oBAAsBjB,4BAA4B,SAAEkB,GACzD,OAAO,SAAEP,GACR,MAAmB,cAAdA,EAAMC,KAAmCO,MAAAC,cAACF,EAAeP,GAE7DQ,MAAAC,cAAClB,SAAQ,KACRiB,MAAAC,cAACF,EAAStC,SAAA,CAAA,EAAM+B,EAAK,CAAGU,UAAYV,EAAME,WAAWC,YACrDK,MAAAC,cAAChB,kBAAiB,KAChBe,MAAAC,cAACZ,UAAS,KACQW,MAAAC,cAAA,KAAA,KAAI,kBACtBD,MAAAC,cAACX,cAAa,CACba,MAAQxB,GAAI,YAAY,gBACxByB,MAAQZ,EAAME,WAAWC,SACzBU,QAAU,CACT,CAACF,MAAM,cAAcC,MAAM,IAC3B,CAACD,MAAM,MAAMC,MAAM,qBACnB,CAACD,MAAM,SAASC,MAAM,yBAEvBE,SAAW,SAAEC,GACZf,EAAMgB,cAAe,CACpBb,SAAUY,GAEZ,MAMN,CACD,GAAG,uBACH/B,UAAW,mBAAoB,iCAAkCsB,qBAEjE,IAAMW,mBAAqB,SAAEC,EAAkBC,EAAWjB,GAIzD,MAH0B,cAAlBiB,EAAUlB,MACX/B,OAAOC,OAAQ+C,EAAkB,CAAER,UAAYQ,EAAiBR,UAAYR,EAAWC,WAEvFe,CACR,EAAElC,UAAW,mCAAoC,wCAAyCiC","file":"../gutenberg_modifications.min.js","sourcesContent":["\n\n//importe le hook addfilter et la localisation\nconst { addFilter } = wp.hooks;\nconst { __ } = wp.i18n;\n\nconst { createHigherOrderComponent } = wp.compose;\nconst { Fragment } = wp.element;\nconst { InspectorControls } = wp.blockEditor;\nconst { PanelBody, SelectControl } = wp.components;\n\n\n/**\n * Ajoute un props au block\n */\nconst addBorderOption = ( props, name ) => {\n\tif(name == 'core/image'){\n\t\t// on ajoute l'attribut et on ajoute une valeur par dÃ©faut\n\t\tprops.attributes = Object.assign( props.attributes, {\n\t\t\timgClass: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: '',\n\t\t\t},\n\t\t} );\n\t}\n\treturn props;\n};addFilter( 'blocks.registerBlockType', 'imgClass/attribute/imgClass', addBorderOption );\n/**\n * Ajoute un controle dans la sidebar pour le plugin \n *\n */\nconst withimgClassControl = createHigherOrderComponent( ( BlockEdit ) => {\n\treturn ( props ) => {\n\t\tif ( props.name != 'core/image' ) { return  ( <BlockEdit { ...props } /> ) ; }\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<BlockEdit { ...props } className={ props.attributes.imgClass }  />\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<PanelBody>\n                        <h3>Overflow image</h3>\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'direction','theme-client' ) }\n\t\t\t\t\t\t\tvalue={ props.attributes.imgClass }\n\t\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t\t{label:'No overflow',value:''},\n\t\t\t\t\t\t\t\t{label:'top',value:' img-overflow-top'},\n\t\t\t\t\t\t\t\t{label:'bottom',value:' img-overflow-bottom'},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\tonChange={ ( newVal) => {\n\t\t\t\t\t\t\t\tprops.setAttributes( {\n\t\t\t\t\t\t\t\t\timgClass: newVal\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t</Fragment>\n\t\t);\n\t};\n}, 'withimgClassControl' );\naddFilter( 'editor.BlockEdit', 'imgClass/with-imgClass-control', withimgClassControl );\n\nconst imgClassExtraProps = ( saveElementProps, blockType, attributes ) => {\n    if ( blockType.name == 'core/image' ) { \n        Object.assign( saveElementProps, { className:  saveElementProps.className + attributes.imgClass } );\n    }\n\treturn saveElementProps;\n};addFilter( 'blocks.getSaveContent.extraProps', 'imgClass/get-save-content/extra-props', imgClassExtraProps );\n\n\n\n"]}