{"version":3,"sources":["wp_rellax.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","addFilter","wp","hooks","createHigherOrderComponent","compose","Fragment","element","InspectorControls","blockEditor","_wp$components","components","PanelBody","SelectControl","CheckboxControl","__experimentalNumberControl","activated_rellax","name","includes","addRellaxOption","props","attributes","assign","Rellax","type","default","activated","speed","center","wrapper","round","vertical","horizontal","withRellaxControl","BlockEdit","React","createElement","label","checked","onChange","val","setAttributes","RellaxExtraProps","saveElementProps","blockType","rellax","className","data-rellax-speed"],"mappings":"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","file":"../wp_rellax.min.js","sourcesContent":["//importe le hook addfilter et la localisation\r\nconst { addFilter } = wp.hooks;\r\n\r\nconst { createHigherOrderComponent } = wp.compose;\r\nconst { Fragment } = wp.element;\r\nconst { InspectorControls } = wp.blockEditor;\r\nconst { PanelBody, SelectControl, CheckboxControl, __experimentalNumberControl } = wp.components;\r\n\r\nlet activated_rellax = function(name){\r\n\t\r\n    return [\r\n        'core/image',\r\n\t\t'core/heading',\r\n\t\t'exm/custom-text',\r\n\t\t'core/buttons',\r\n\t\t//'core/embed', \r\n\t\t'core/group',\r\n\t\t'core/column',\r\n\t\t'core/columns'\r\n    ].includes(name);\r\n}\r\n/**\r\n * Ajoute un props au block\r\n */\r\nconst addRellaxOption = ( props, name ) => {\r\n\tif(activated_rellax(name)){\r\n\t\t// on ajoute l'attribut et on ajoute une valeur par dÃ©faut\r\n\t\tprops.attributes = Object.assign( props.attributes, {\r\n\t\t\tRellax: {\r\n\t\t\t\ttype: 'object',\r\n\t\t\t\tdefault: {\r\n                    activated:false,\r\n                    speed: -2,\r\n                    center: false,\r\n                    wrapper: null,\r\n                    round: true,\r\n                    vertical: true,\r\n                    horizontal: false\r\n                },\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\treturn props;\r\n};addFilter( 'blocks.registerBlockType', 'rellax/attribute/rellax', addRellaxOption );\r\n/**\r\n * Ajoute un controle dans la sidebar pour le plugin \r\n *\r\n */\r\nconst withRellaxControl = createHigherOrderComponent( ( BlockEdit ) => {\r\n\treturn ( props ) => {\r\n\t\tif (!activated_rellax(props.name)) { return  ( <BlockEdit { ...props } /> ) ; }\r\n\r\n\t\tconst setActivated = (val) =>{\r\n\t\t\tprops.setAttributes({\r\n\t\t\t\tRellax:{...props.attributes.Rellax,activated:val}\r\n\t\t\t})\r\n\t\t}\r\n\t\tconst setSpeed = (val) =>{\r\n\t\t\tif(val >= -10 && val <=10) {\r\n\t\t\t\tprops.setAttributes({\r\n\t\t\t\t\tRellax:{...props.attributes.Rellax,speed:val}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<BlockEdit { ...props } />\r\n\t\t\t\t<InspectorControls>\r\n\t\t\t\t\t\t<PanelBody>\r\n                        <h3>Parralax</h3>\r\n                        <CheckboxControl\r\n\t\t\t\t\t\t\tlabel=\"Activated\"\r\n\t\t\t\t\t\t\tchecked={props.attributes.Rellax.activated}\r\n\t\t\t\t\t\t\tonChange={setActivated}\r\n                        />\r\n\t\t\t\t\t\t{(props.attributes.Rellax.activated)?\r\n\t\t\t\t\t\t\t\t<__experimentalNumberControl\r\n\t\t\t\t\t\t\t\t\tlabel=\"Parralax speed\"\r\n\t\t\t\t\t\t\t\t\tonChange={ setSpeed }\r\n\t\t\t\t\t\t\t\t\tvalue={ props.attributes.Rellax.speed }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t:null}\r\n\t\t\t\t\t\t</PanelBody>\r\n\t\t\t\t\t\t\r\n\t\t\t\t</InspectorControls>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t};\r\n}, 'withRellaxControl' );\r\naddFilter( 'editor.BlockEdit', 'Rellax/with-Rellax-control', withRellaxControl );\r\n\r\nconst RellaxExtraProps = ( saveElementProps, blockType, attributes ) => {\r\n    if ( activated_rellax(blockType.name) ) { \r\n\t\tif(attributes.Rellax){\r\n\t\t\tlet rellax = attributes.Rellax;\r\n\t\t\tif(rellax.activated){\r\n\t\t\t\tObject.assign( saveElementProps, { \r\n\t\t\t\t\tclassName:  saveElementProps.className + ' rellax',\r\n\t\t\t\t\t'data-rellax-speed':rellax.speed\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n\treturn saveElementProps;\r\n};addFilter( 'blocks.getSaveContent.extraProps', 'Rellax/get-save-content/extra-props', RellaxExtraProps );\r\n\r\n\r\n\r\n"]}