{"version":3,"sources":["wp_rellax.js"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","key","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","TypeError","Number","addFilter","wp","hooks","createHigherOrderComponent","compose","Fragment","element","InspectorControls","blockEditor","_wp$components","components","PanelBody","SelectControl","CheckboxControl","__experimentalNumberControl","activated_rellax","name","includes","addRellaxOption","props","attributes","assign","Rellax","type","default","activated","speed","center","wrapper","round","vertical","horizontal","withRellaxControl","BlockEdit","React","createElement","label","checked","onChange","val","setAttributes","RellaxExtraProps","saveElementProps","blockType","rellax","className"],"mappings":"AAAA,SAASA,QAAQC,GAAgC,OAAOD,QAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAAK,cAAcA,CAAG,EAAI,SAAUA,GAAK,OAAOA,GAAK,mBAAqBC,QAAUD,EAAEG,cAAgBF,QAAUD,IAAMC,OAAOG,UAAY,gBAAkBJ,CAAG,EAAGD,QAAQC,EAAI,CAC7T,SAASK,QAAQC,EAAGC,GAAK,IAAIC,EAAIC,OAAOC,KAAKJ,GAAI,GAAIG,OAAOE,sBAAuB,CAAE,IAAIX,EAAIS,OAAOE,sBAAsBL,GAAIC,IAAMP,EAAIA,EAAEY,QAAO,SAAUL,GAAK,OAAOE,OAAOI,yBAAyBP,EAAGC,GAAGO,UAAY,KAAKN,EAAEO,KAAKC,MAAMR,EAAGR,EAAI,CAAE,OAAOQ,CAAG,CAC9P,SAASS,cAAcX,GAAK,IAAK,IAAIC,EAAI,EAAGA,EAAIW,UAAUC,OAAQZ,IAAK,CAAE,IAAIC,EAAI,MAAQU,UAAUX,GAAKW,UAAUX,GAAK,CAAC,EAAGA,EAAI,EAAIF,QAAQI,OAAOD,IAAI,GAAIY,SAAQ,SAAUb,GAAKc,gBAAgBf,EAAGC,EAAGC,EAAED,GAAK,IAAKE,OAAOa,0BAA4Bb,OAAOc,iBAAiBjB,EAAGG,OAAOa,0BAA0Bd,IAAMH,QAAQI,OAAOD,IAAIY,SAAQ,SAAUb,GAAKE,OAAOe,eAAelB,EAAGC,EAAGE,OAAOI,yBAAyBL,EAAGD,GAAK,GAAI,CAAE,OAAOD,CAAG,CACtb,SAASe,gBAAgBI,EAAKC,EAAKC,GAA4L,OAAnLD,EAAME,eAAeF,MAAiBD,EAAOhB,OAAOe,eAAeC,EAAKC,EAAK,CAAEC,MAAOA,EAAOb,YAAY,EAAMe,cAAc,EAAMC,UAAU,IAAkBL,EAAIC,GAAOC,EAAgBF,CAAK,CAC3O,SAASG,eAAeG,GAAO,IAAIL,EAAMM,aAAaD,EAAK,UAAW,MAAwB,WAAjBhC,QAAQ2B,GAAoBA,EAAMO,OAAOP,EAAM,CAC5H,SAASM,aAAaE,EAAOC,GAAQ,GAAuB,WAAnBpC,QAAQmC,IAAiC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMjC,OAAOoC,aAAc,QAAaC,IAATF,EAAoB,CAAE,IAAIG,EAAMH,EAAKI,KAAKN,EAAOC,GAAQ,WAAY,GAAqB,WAAjBpC,QAAQwC,GAAmB,OAAOA,EAAK,MAAM,IAAIE,UAAU,+CAAiD,CAAE,OAAiB,WAATN,EAAoBF,OAASS,QAAQR,EAAQ,CAJ5X,IAAQS,UAAcC,GAAGC,MAAjBF,UAEAG,2BAA+BF,GAAGG,QAAlCD,2BACAE,SAAaJ,GAAGK,QAAhBD,SACAE,kBAAsBN,GAAGO,YAAzBD,kBACRE,eAAmFR,GAAGS,WAA9EC,UAASF,eAATE,UAAWC,cAAaH,eAAbG,cAAeC,gBAAeJ,eAAfI,gBAAiBC,4BAA2BL,eAA3BK,4BAE/CC,iBAAmB,SAASC,GAE5B,MAAO,CACH,aACN,eACA,kBACA,eAEA,aACA,cACA,gBACIC,SAASD,EACf,EAIME,gBAAkB,SAAEC,EAAOH,GAkBhC,OAjBGD,iBAAiBC,KAEnBG,EAAMC,WAAatD,OAAOuD,OAAQF,EAAMC,WAAY,CACnDE,OAAQ,CACPC,KAAM,SACNC,QAAS,CACOC,WAAU,EACVC,OAAQ,EACRC,QAAQ,EACRC,QAAS,KACTC,OAAO,EACPC,UAAU,EACVC,YAAY,OAKxBZ,CACR,EAAEnB,UAAW,2BAA4B,0BAA2BkB,iBAKpE,IAAMc,kBAAoB7B,4BAA4B,SAAE8B,GACvD,OAAO,SAAEd,GACR,IAAKJ,iBAAiBI,EAAMH,MAAS,OAAUkB,MAAAC,cAACF,EAAed,GAe/D,OACCe,MAAAC,cAAC9B,SAAQ,KACR6B,MAAAC,cAACF,EAAed,GAChBe,MAAAC,cAAC5B,kBAAiB,KAChB2B,MAAAC,cAACxB,UAAS,KACQuB,MAAAC,cAAA,KAAA,KAAI,YACJD,MAAAC,cAACtB,gBAAe,CACjCuB,MAAM,YACNC,QAASlB,EAAMC,WAAWE,OAAOG,UACjCa,SAtBgB,SAACC,GACrBpB,EAAMqB,cAAc,CACnBlB,OAAMhD,cAAAA,cAAA,CAAA,EAAK6C,EAAMC,WAAWE,QAAM,CAAA,EAAA,CAACG,UAAUc,KAE/C,IAoBMpB,EAAMC,WAAWE,OAAOG,UACxBS,MAAAC,cAACrB,4BAA2B,CAC3BsB,MAAM,iBACNE,SAtBU,SAACC,GACdA,IAAQ,IAAMA,GAAM,IACtBpB,EAAMqB,cAAc,CACnBlB,OAAMhD,cAAAA,cAAA,CAAA,EAAK6C,EAAMC,WAAWE,QAAM,CAAA,EAAA,CAACI,MAAMa,KAG5C,EAiBOvD,MAAQmC,EAAMC,WAAWE,OAAOI,QAElC,OAMN,CACD,GAAG,qBACH1B,UAAW,mBAAoB,6BAA8BgC,mBAE7D,IAAMS,iBAAmB,SAAEC,EAAkBC,EAAWvB,GACpD,GAAKL,iBAAiB4B,EAAU3B,OAC/BI,EAAWE,OAAO,CACpB,IAAIsB,EAASxB,EAAWE,OACrBsB,EAAOnB,WACT3D,OAAOuD,OAAQqB,EAAkB,CAChCG,UAAYH,EAAiBG,UAAY,UACzC,oBAAoBD,EAAOlB,OAI9B,CAED,OAAOgB,CACR,EAAE1C,UAAW,mCAAoC,sCAAuCyC","file":"../wp_rellax.min.js","sourcesContent":["//importe le hook addfilter et la localisation\nconst { addFilter } = wp.hooks;\n\nconst { createHigherOrderComponent } = wp.compose;\nconst { Fragment } = wp.element;\nconst { InspectorControls } = wp.blockEditor;\nconst { PanelBody, SelectControl, CheckboxControl, __experimentalNumberControl } = wp.components;\n\nlet activated_rellax = function(name){\n\t\n    return [\n        'core/image',\n\t\t'core/heading',\n\t\t'exm/custom-text',\n\t\t'core/buttons',\n\t\t//'core/embed', \n\t\t'core/group',\n\t\t'core/column',\n\t\t'core/columns'\n    ].includes(name);\n}\n/**\n * Ajoute un props au block\n */\nconst addRellaxOption = ( props, name ) => {\n\tif(activated_rellax(name)){\n\t\t// on ajoute l'attribut et on ajoute une valeur par dÃ©faut\n\t\tprops.attributes = Object.assign( props.attributes, {\n\t\t\tRellax: {\n\t\t\t\ttype: 'object',\n\t\t\t\tdefault: {\n                    activated:false,\n                    speed: -2,\n                    center: false,\n                    wrapper: null,\n                    round: true,\n                    vertical: true,\n                    horizontal: false\n                },\n\t\t\t},\n\t\t} );\n\t}\n\treturn props;\n};addFilter( 'blocks.registerBlockType', 'rellax/attribute/rellax', addRellaxOption );\n/**\n * Ajoute un controle dans la sidebar pour le plugin \n *\n */\nconst withRellaxControl = createHigherOrderComponent( ( BlockEdit ) => {\n\treturn ( props ) => {\n\t\tif (!activated_rellax(props.name)) { return  ( <BlockEdit { ...props } /> ) ; }\n\n\t\tconst setActivated = (val) =>{\n\t\t\tprops.setAttributes({\n\t\t\t\tRellax:{...props.attributes.Rellax,activated:val}\n\t\t\t})\n\t\t}\n\t\tconst setSpeed = (val) =>{\n\t\t\tif(val >= -10 && val <=10) {\n\t\t\t\tprops.setAttributes({\n\t\t\t\t\tRellax:{...props.attributes.Rellax,speed:val}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<BlockEdit { ...props } />\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<PanelBody>\n                        <h3>Parralax</h3>\n                        <CheckboxControl\n\t\t\t\t\t\t\tlabel=\"Activated\"\n\t\t\t\t\t\t\tchecked={props.attributes.Rellax.activated}\n\t\t\t\t\t\t\tonChange={setActivated}\n                        />\n\t\t\t\t\t\t{(props.attributes.Rellax.activated)?\n\t\t\t\t\t\t\t\t<__experimentalNumberControl\n\t\t\t\t\t\t\t\t\tlabel=\"Parralax speed\"\n\t\t\t\t\t\t\t\t\tonChange={ setSpeed }\n\t\t\t\t\t\t\t\t\tvalue={ props.attributes.Rellax.speed }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t:null}\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t\n\t\t\t\t</InspectorControls>\n\t\t\t</Fragment>\n\t\t);\n\t};\n}, 'withRellaxControl' );\naddFilter( 'editor.BlockEdit', 'Rellax/with-Rellax-control', withRellaxControl );\n\nconst RellaxExtraProps = ( saveElementProps, blockType, attributes ) => {\n    if ( activated_rellax(blockType.name) ) { \n\t\tif(attributes.Rellax){\n\t\t\tlet rellax = attributes.Rellax;\n\t\t\tif(rellax.activated){\n\t\t\t\tObject.assign( saveElementProps, { \n\t\t\t\t\tclassName:  saveElementProps.className + ' rellax',\n\t\t\t\t\t'data-rellax-speed':rellax.speed\n\t\t\t\t});\n\n\t\t\t}\n\t\t}\n    }\n\treturn saveElementProps;\n};addFilter( 'blocks.getSaveContent.extraProps', 'Rellax/get-save-content/extra-props', RellaxExtraProps );\n\n\n\n"]}