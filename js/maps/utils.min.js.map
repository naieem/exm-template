{"version":3,"sources":["utils.js"],"names":["validateEmail","email","test","isMobile","navigator","userAgent","substr","window","innerWidth","cdmConf","mobile_width","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","NodeList","forEach","callback","thisArg","i","this","length","call","String","includes","search","start","RegExp","TypeError","indexOf","$","parallaxAnimationFrame","parallaxObject","win","image","removeClass","section","isOnScreen","visiblePart","parseInt","css","maxScroll","height","sectionScroll","scrollTop","offset","top","centPourcent","outerHeight","vitesse","requestAnimationFrame","fn","viewport","left","scrollLeft","right","width","bottom","bounds","outerWidth","calculateViewBox","svg","viewboxWidth","viewboxHeight","find","each","bbox","getBBox","endX","x","endY","y","attr","parallax","zIndex","console","log","addClass","appendTo","append","checkAnimations","hasClass","index","el","elem_class","pos","anim_name","substring","setTimeout","animateCSS","replace","dispatchEvent","MutationObserver","mutations","mutation","type","addedNodes","observe","childList","subtree","on","jQuery","element","animation","prefix","arguments","Promise","resolve","reject","animationName","concat","Element","HTMLDocument","querySelector","classList","add","addEventListener","remove","once"],"mappings":"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","file":"../utils.min.js","sourcesContent":["/**\n * Polyfill CustomEvent pour IE.\n */\n(function(){\n    if ( typeof window.CustomEvent === \"function\" ) return false;\n  \n    function CustomEvent ( event, params ) {\n      params = params || { bubbles: false, cancelable: false, detail: undefined };\n      var evt = document.createEvent( 'CustomEvent' );\n      evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n      return evt;\n     }\n  \n    CustomEvent.prototype = window.Event.prototype;\n  \n    window.CustomEvent = CustomEvent;\n})();\n\n// validation\nfunction validateEmail(email) { \n\tvar re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/; // TODO: ne pas accepter un IP \n\treturn re.test(email);\n}\n\nfunction isMobile(){\n\tif(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4)) || window.innerWidth <= cdmConf.mobile_width){ return true;}else{return false;}\n}\n\n\n\nif (window.NodeList && !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = function (callback, thisArg) {\n        thisArg = thisArg || window;\n        for (var i = 0; i < this.length; i++) {\n            callback.call(thisArg, this[i], i, this);\n        }\n    };\n}\nif (!String.prototype.includes) {\n\tString.prototype.includes = function(search, start) {\n\t  'use strict';\n  \n\t  if (search instanceof RegExp) {\n\t\tthrow TypeError('first argument must not be a RegExp');\n\t  }\n\t  if (start === undefined) { start = 0; }\n\t  return this.indexOf(search, start) !== -1;\n\t};\n  }\n\n\n(function($){\n\t/* function requise pour le parallax\n\t* détecte si un élément est afficher sur l'écran\n\t* Return bool\n\t*/\n\t$.fn.isOnScreen = function(){\n\n\t\tvar win = $(window);\n\n\t\tvar viewport = {\n\t\t\ttop : win.scrollTop(),\n\t\t\tleft : win.scrollLeft()\n\t\t};\n\t\tviewport.right = viewport.left + win.width();\n\t\tviewport.bottom = viewport.top + win.height();\n\n\t\tvar bounds = this.offset();\n\t\tbounds.right = bounds.left + this.outerWidth();\n\t\tbounds.bottom = bounds.top + this.outerHeight();\n\n\t\treturn (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));\n\n\t};\n\n\t/**\n\t * Calcule les dimensions du viewBox d'un SVG avec les path visibles.\n\t * @param {Node} svg \n\t */\n\t$.fn.calculateViewBox = function(svg){\n\t\tvar viewboxWidth = 0;\n\t\tvar viewboxHeight = 0;\n\n\t\t$(svg).find('path:visible').each(function(){\n\t\t\tvar bbox = this.getBBox();\n\t\t\tvar endX = bbox.x + bbox.width;\n\t\t\tvar endY = bbox.y + bbox.height;\n\n\t\t\tif(endX > viewboxWidth){\n\t\t\t\tviewboxWidth = endX;\n\t\t\t}\n\n\t\t\tif(endY > viewboxHeight){\n\t\t\t\tviewboxHeight = endY;\n\t\t\t}\n\t\t});\n\n\t\t$(svg).attr('viewBox', '0 0 '+ viewboxWidth + ' ' + viewboxHeight);\n\t}\n\n\t/**\n\t * Rajoute du parallax a un élément\n\t * On doit déjà avoir un element dans le div qui est l'image\n\t *\n\t * @param section Le div qui va contenir le parallax\n\t * @param {int} [vitesse=0] La vitesse de défilement. Plus le chiffre est grand, mois la vitesse est grande, 0 = automatique\n\t * @param {int} [zIndex=-1] z-index de l'image\n\t * @return void\n\t */\n\t$.fn.parallax = function(section, vitesse, zIndex){\n\t\timage = this; // image to animation\n\t\tsection = $(section); // section to animate the image\n\n\t\tif(section.length == 0){\n\t\t\tconsole.log(\"la section pour le parallax n'existe pas\");\n\t\t}\n\n\t\tif(image.length == 0){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvitesse = (typeof vitesse === 'undefined') ? 3 : vitesse; // réduction de la vitesse du parallax\n\t\tzIndex = (typeof zIndex === 'undefined') ? -1 : zIndex; // zIndex de -1 par default\n\t\t\n\t\t\n\t\timage.addClass('img-parallax');\n\t\tsection.addClass('section-parallax');\n\t\t\n\t\t// ajoute une wrapper pour l'image a l'intérieur de la section pour la garder dans le flow\n\t\t$('<div class=\"parallax-img-wrapper\"></div>').appendTo(section).css('z-index', zIndex).append(image);\n\t\t\n\t\tvar parallaxObject = {\n\t\t\tvitesse: vitesse,\n\t\t\timage: image,\n\t\t\tsection: section\n\t\t};\n\t\t\n\t\tparallaxAnimationFrame(parallaxObject);\n\t}\n\n\tfunction parallaxAnimationFrame(parallaxObject){\n\t\twin = $(window);\n\n\t\tparallaxObject.image.removeClass('inactif'); // active le parallax\n\t\t\n\t\tif(parallaxObject.section.isOnScreen() === true){\n\t\t\tvar visiblePart = parseInt(parallaxObject.section.css('height')); // hauteur de la section = zone visible de l'image\n\t\t\tvar maxScroll = parallaxObject.image.height() - visiblePart; // hauteur d'extra de l'image\n\t\t\t\n\t\t\tvar sectionScroll = win.scrollTop() + win.height() - parallaxObject.section.offset().top; // sectionScroll est à 0 quand on commence a voir la section, est représente le nombre de pixels visibles\n\t\t\t\n\t\t\tcentPourcent = parallaxObject.section.outerHeight() + win.height();\n\t\t\t//console.log(sectionScroll/centPourcent +\"%\");\n\t\t\t\n\t\t\tif(parallaxObject.vitesse == 0){\n\t\t\t\t// sectionScroll/centPourcent = mon pourcentage, entre 0 et 1\n\t\t\t\tparallaxObject.image.css('top', ((parallaxObject.section.outerHeight() - parallaxObject.image.height()) * (sectionScroll/centPourcent)) );\n\t\t\t}else{\n\t\t\t\t// si l'image est visible au top, on la part de 0\n\t\t\t\tif(parallaxObject.section.offset().top < win.height()){\n\t\t\t\t\tsectionScroll = win.scrollTop()/parallaxObject.vitesse;\n\t\t\t\t}else{\n\t\t\t\t\tsectionScroll = sectionScroll/parallaxObject.vitesse;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(sectionScroll >= maxScroll){ // si on a atteint le scroll maximum on reste au max\n\t\t\t\t\tparallaxObject.image.css('top', maxScroll*-1);\n\t\t\t\t}else{\n\t\t\t\t\tparallaxObject.image.css('top', sectionScroll*-1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\twindow.requestAnimationFrame(function(){\n\t\t\tparallaxAnimationFrame(parallaxObject);\n\t\t});\n\t}\n\n\t/*************/\n\t/* ANIMATION */\n\t/*************/\n\n\t// add class .toAnimate to html element with a animate.css effect class\n\t// when on screen, the animation will execute\n\tconst mutationConfig = {\n\t\tchildList: true,\n\t\tsubtree: true\n\t};\n\tvar newAnimationObserver = new MutationObserver(domNewContent);\n\tnewAnimationObserver.observe(document, mutationConfig);\n\t\n\tfunction domNewContent(mutations){\n\t\tmutations.forEach(function(mutation){\n\t\t\tif(mutation.type == 'childList'){\n\t\t\t\tlet addedNodes = mutation.addedNodes;\n\t\t\t\t\n\t\t\t\tif(addedNodes.length){ // Nouveau contenu ajouté\n\t\t\t\t\tcheckAnimations();\n\t\t\t\t}\n\t\t\t}\n\t\t}); \n\t}\n\n\t$(window).on('scroll load', function(event) {\n\t\tcheckAnimations();\n\t});\n\n\tfunction checkAnimations(){\n\t\tif(!$('html').hasClass('preload')){\n\t\t\trequestAnimationFrame(function() {\n\t\t\t\t$('.toAnimate').each(function(index, el) {\n\t\t\t\t\tif($(this).isOnScreen() === true){\n\t\t\t\t\t\tvar elem_class = $(this).attr('class');\n\t\t\t\t\t\tvar pos = elem_class.search('animate__');\n\n\t\t\t\t\t\tif(pos !== -1){\n\t\t\t\t\t\t\tvar anim_name = elem_class.substring(pos, elem_class.indexOf(\" \", pos) !== -1 ? elem_class.indexOf(\" \", pos) : elem_class.length);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(this).removeClass(anim_name);\n\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\tanimateCSS(el, anim_name.replace('animate__', ''));\n\t\t\t\t\t\t\t\t$(el).removeClass('toAnimate');\n\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.dispatchEvent(new CustomEvent('animated'));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\n})(jQuery);\n\n/**\n * Fonction pour déclencher une animation.\n * \n * @param string|Element|HTMLDocument element Sélecteur sous forme de string ou un élément HTML.\n * @param string animation Le nom de l'animation.\n * @param string prefix Le prefix pour les animations (laissez valeur par défaut).\n */\nconst animateCSS = (element, animation, prefix = 'animate__') =>\n\t// We create a Promise and return it\n\tnew Promise((resolve, reject) => {\n\t\tconst animationName = `${prefix}${animation}`;\n\n\t\tif((element instanceof Element) === false && (element instanceof HTMLDocument) === false){\n\t\t\telement = document.querySelector(element);\n\t\t}\n\n\t\telement.classList.add(`${prefix}animated`, animationName);\n\n\t\t// When the animation ends, we clean the classes and resolve the Promise\n\t\tfunction handleAnimationEnd() {\n\t\t\telement.classList.remove(`${prefix}animated`, animationName);\n\t\t\tresolve('Animation ended');\n\t\t}\n\n\t\telement.addEventListener('animationend', handleAnimationEnd, {once: true});\n\t});"]}